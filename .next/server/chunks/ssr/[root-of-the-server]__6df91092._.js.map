{"version":3,"sources":["../../../../src/app/%28admin%29/options/%5Bid%5D/exercise/exercise-form.tsx/__nextjs-internal-proxy.mjs","../../../../src/app/%28admin%29/options/%5Bid%5D/exercise/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ExerciseForm = registerClientReference(\n    function() { throw new Error(\"Attempted to call ExerciseForm() from the server but ExerciseForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/(admin)/options/[id]/exercise/exercise-form.tsx\",\n    \"ExerciseForm\",\n);\n","import { prisma } from \"@/lib/prisma\";\nimport { notFound } from \"next/navigation\";\nimport Link from \"next/link\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { formatCurrency, formatNumber } from \"@/lib/utils\";\nimport { getVestingProgress } from \"@/lib/vesting\";\nimport { ArrowLeft } from \"lucide-react\";\nimport { ExerciseForm } from \"./exercise-form\";\n\nasync function getGrantForExercise(id: string) {\n  const grant = await prisma.optionGrant.findUnique({\n    where: { id },\n    include: {\n      stakeholder: true,\n      company: true,\n    },\n  });\n\n  if (!grant) return null;\n\n  const progress = await getVestingProgress(grant.id);\n\n  return { grant, progress };\n}\n\nexport default async function ExerciseOptionsPage({\n  params,\n}: {\n  params: Promise<{ id: string }>;\n}) {\n  const { id } = await params;\n  const data = await getGrantForExercise(id);\n\n  if (!data) {\n    notFound();\n  }\n\n  const { grant, progress } = data;\n\n  if (progress.exercisableShares <= 0) {\n    return (\n      <div className=\"max-w-2xl mx-auto space-y-6\">\n        <div className=\"flex items-center gap-4\">\n          <Link href={`/options/${id}`}>\n            <Button variant=\"ghost\" size=\"icon\">\n              <ArrowLeft className=\"h-4 w-4\" />\n            </Button>\n          </Link>\n          <div>\n            <h1 className=\"text-3xl font-bold tracking-tight\">Exercise Options</h1>\n            <p className=\"text-muted-foreground\">{grant.securityId}</p>\n          </div>\n        </div>\n\n        <Card>\n          <CardContent className=\"py-8 text-center\">\n            <p className=\"text-muted-foreground\">\n              No options available to exercise at this time.\n            </p>\n            <Link href={`/options/${id}`} className=\"mt-4 inline-block\">\n              <Button variant=\"outline\">Back to Grant Details</Button>\n            </Link>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-2xl mx-auto space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center gap-4\">\n        <Link href={`/options/${id}`}>\n          <Button variant=\"ghost\" size=\"icon\">\n            <ArrowLeft className=\"h-4 w-4\" />\n          </Button>\n        </Link>\n        <div>\n          <h1 className=\"text-3xl font-bold tracking-tight\">Exercise Options</h1>\n          <p className=\"text-muted-foreground\">{grant.securityId}</p>\n        </div>\n      </div>\n\n      {/* Summary Card */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Exercise Summary</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className=\"text-sm text-muted-foreground\">Optionholder</label>\n              <p className=\"font-medium\">{grant.stakeholder.name}</p>\n            </div>\n            <div>\n              <label className=\"text-sm text-muted-foreground\">Grant</label>\n              <p className=\"font-medium\">{grant.securityId}</p>\n            </div>\n            <div>\n              <label className=\"text-sm text-muted-foreground\">\n                Available to Exercise\n              </label>\n              <p className=\"font-medium text-green-600 font-mono\">\n                {formatNumber(progress.exercisableShares)}\n              </p>\n            </div>\n            <div>\n              <label className=\"text-sm text-muted-foreground\">Exercise Price</label>\n              <p className=\"font-medium font-mono\">\n                {formatCurrency(Number(grant.exercisePrice))}\n              </p>\n            </div>\n            <div>\n              <label className=\"text-sm text-muted-foreground\">Total Vested</label>\n              <p className=\"font-medium font-mono\">\n                {formatNumber(progress.vestedShares)}\n              </p>\n            </div>\n            <div>\n              <label className=\"text-sm text-muted-foreground\">Already Exercised</label>\n              <p className=\"font-medium font-mono\">\n                {formatNumber(progress.exercisedShares)}\n              </p>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Exercise Form */}\n      <ExerciseForm\n        grantId={grant.id}\n        exercisableShares={progress.exercisableShares}\n        exercisePrice={Number(grant.exercisePrice)}\n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}