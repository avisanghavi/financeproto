module.exports=[40062,a=>a.a(async(b,c)=>{try{var d=a.i(37936),e=a.i(66518),f=a.i(18558),g=a.i(53112),h=a.i(13095),i=b([e]);[e]=i.then?(await i)():i;let p=g.z.object({name:g.z.string().min(1,"Company name is required"),legalName:g.z.string().optional(),incorporationDate:g.z.string().min(1,"Incorporation date is required"),incorporationState:g.z.string().min(1,"Incorporation state is required"),authorizedShares:g.z.coerce.number().int().positive("Authorized shares must be positive"),parValue:g.z.coerce.number().positive("Par value must be positive")});async function j(a,b){let c=p.safeParse({name:b.get("name"),legalName:b.get("legalName")||void 0,incorporationDate:b.get("incorporationDate"),incorporationState:b.get("incorporationState"),authorizedShares:b.get("authorizedShares"),parValue:b.get("parValue")});if(!c.success)return{errors:c.error.flatten().fieldErrors};try{if(await e.prisma.company.findFirst())return{errors:{_form:["A company already exists. Please edit the existing company."]}};await e.prisma.company.create({data:{name:c.data.name,legalName:c.data.legalName||null,incorporationDate:new Date(c.data.incorporationDate),incorporationState:c.data.incorporationState,authorizedShares:c.data.authorizedShares,parValue:c.data.parValue}}),(0,f.revalidatePath)("/settings"),(0,f.revalidatePath)("/")}catch(a){return console.error("Error creating company:",a),{errors:{_form:["Failed to create company. Please try again."]}}}return{success:!0}}async function k(a,b){let c=b.get("id"),d=p.safeParse({name:b.get("name"),legalName:b.get("legalName")||void 0,incorporationDate:b.get("incorporationDate"),incorporationState:b.get("incorporationState"),authorizedShares:b.get("authorizedShares"),parValue:b.get("parValue")});if(!d.success)return{errors:d.error.flatten().fieldErrors};try{await e.prisma.company.update({where:{id:c},data:{name:d.data.name,legalName:d.data.legalName||null,incorporationDate:new Date(d.data.incorporationDate),incorporationState:d.data.incorporationState,authorizedShares:d.data.authorizedShares,parValue:d.data.parValue}}),(0,f.revalidatePath)("/settings"),(0,f.revalidatePath)("/")}catch(a){return console.error("Error updating company:",a),{errors:{_form:["Failed to update company. Please try again."]}}}return{success:!0}}let q=g.z.object({name:g.z.string().min(1,"Share class name is required"),type:g.z.enum(["COMMON","PREFERRED"]),authorizedShares:g.z.coerce.number().int().positive("Authorized shares must be positive"),pricePerShare:g.z.coerce.number().positive("Price per share must be positive"),conversionRatio:g.z.coerce.number().positive().optional(),liquidationPreference:g.z.coerce.number().optional(),liquidationMultiple:g.z.coerce.number().optional(),participatingPreferred:g.z.coerce.boolean().optional(),seniority:g.z.coerce.number().int().optional()});async function l(a,b){let c=b.get("companyId"),d=q.safeParse({name:b.get("name"),type:b.get("type"),authorizedShares:b.get("authorizedShares"),pricePerShare:b.get("pricePerShare"),conversionRatio:b.get("conversionRatio")||void 0,liquidationPreference:b.get("liquidationPreference")||void 0,liquidationMultiple:b.get("liquidationMultiple")||void 0,participatingPreferred:"true"===b.get("participatingPreferred"),seniority:b.get("seniority")||void 0});if(!d.success)return{errors:d.error.flatten().fieldErrors};try{await e.prisma.shareClass.create({data:{companyId:c,name:d.data.name,type:d.data.type,authorizedShares:d.data.authorizedShares,pricePerShare:d.data.pricePerShare,conversionRatio:d.data.conversionRatio??1,liquidationPreference:d.data.liquidationPreference,liquidationMultiple:d.data.liquidationMultiple,participatingPreferred:d.data.participatingPreferred??!1,seniority:d.data.seniority??0}}),(0,f.revalidatePath)("/settings")}catch(a){return console.error("Error creating share class:",a),{errors:{_form:["Failed to create share class. Please try again."]}}}return{success:!0}}async function m(a){try{let b=await e.prisma.shareCertificate.count({where:{shareClassId:a}});if(b>0)return{error:`Cannot delete share class. It has ${b} certificate(s) associated with it.`};return await e.prisma.shareClass.delete({where:{id:a}}),(0,f.revalidatePath)("/settings"),{}}catch(a){return console.error("Error deleting share class:",a),{error:"Failed to delete share class."}}}let r=g.z.object({name:g.z.string().min(1,"Plan name is required"),totalPoolSize:g.z.coerce.number().int().positive("Pool size must be positive"),boardApprovalDate:g.z.string().min(1,"Board approval date is required"),expirationDate:g.z.string().min(1,"Expiration date is required")});async function n(a,b){let c=b.get("companyId"),d=r.safeParse({name:b.get("name"),totalPoolSize:b.get("totalPoolSize"),boardApprovalDate:b.get("boardApprovalDate"),expirationDate:b.get("expirationDate")});if(!d.success)return{errors:d.error.flatten().fieldErrors};try{await e.prisma.equityPlan.create({data:{companyId:c,name:d.data.name,totalPoolSize:d.data.totalPoolSize,availableShares:d.data.totalPoolSize,boardApprovalDate:new Date(d.data.boardApprovalDate),expirationDate:new Date(d.data.expirationDate)}}),(0,f.revalidatePath)("/settings")}catch(a){return console.error("Error creating equity plan:",a),{errors:{_form:["Failed to create equity plan. Please try again."]}}}return{success:!0}}async function o(a){try{let b=await e.prisma.optionGrant.count({where:{equityPlanId:a}});if(b>0)return{error:`Cannot delete equity plan. It has ${b} grant(s) associated with it.`};return await e.prisma.equityPlan.delete({where:{id:a}}),(0,f.revalidatePath)("/settings"),{}}catch(a){return console.error("Error deleting equity plan:",a),{error:"Failed to delete equity plan."}}}(0,h.ensureServerEntryExports)([j,k,l,m,n,o]),(0,d.registerServerReference)(j,"60b1ce4db9bde9743708da32f4cf4c6b122b2c1611",null),(0,d.registerServerReference)(k,"606889f43c5f260c2a733455bb8f871e9148c117bb",null),(0,d.registerServerReference)(l,"60058a6e723404676ad799953bb5ba1d30c72ceefb",null),(0,d.registerServerReference)(m,"40d0788548af97c425a00c116775696b4b549ac5fa",null),(0,d.registerServerReference)(n,"600983f5a7b451e8cfbe74dc1fb45f7af3f8527515",null),(0,d.registerServerReference)(o,"4004d1d0caa15e397d59be83308f954a9edd1ea4bd",null),a.s(["createCompany",()=>j,"createEquityPlan",()=>n,"createShareClass",()=>l,"deleteEquityPlan",()=>o,"deleteShareClass",()=>m,"updateCompany",()=>k]),c()}catch(a){c(a)}},!1),66710,a=>a.a(async(b,c)=>{try{var d=a.i(40062),e=b([d]);[d]=e.then?(await e)():e,a.s([]),c()}catch(a){c(a)}},!1),7188,a=>a.a(async(b,c)=>{try{var d=a.i(66710),e=a.i(40062),f=b([d,e]);[d,e]=f.then?(await f)():f,a.s(["4004d1d0caa15e397d59be83308f954a9edd1ea4bd",()=>e.deleteEquityPlan,"40d0788548af97c425a00c116775696b4b549ac5fa",()=>e.deleteShareClass,"60058a6e723404676ad799953bb5ba1d30c72ceefb",()=>e.createShareClass,"600983f5a7b451e8cfbe74dc1fb45f7af3f8527515",()=>e.createEquityPlan,"606889f43c5f260c2a733455bb8f871e9148c117bb",()=>e.updateCompany,"60b1ce4db9bde9743708da32f4cf4c6b122b2c1611",()=>e.createCompany]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=_12ab5610._.js.map