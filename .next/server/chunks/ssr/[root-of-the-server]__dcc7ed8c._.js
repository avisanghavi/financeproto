module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},50645,a=>{a.n(a.i(27572))},17537,a=>{a.n(a.i(3363))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},2533,a=>a.a(async(b,c)=>{try{var d=a.i(66518),e=a.i(19311),f=b([d,e]);async function g(a,b,c,f){await d.prisma.vestingPeriod.deleteMany({where:{vestingScheduleId:a}});let g=(0,e.generateVestingPeriods)(b,c,f);return await d.prisma.vestingPeriod.createManyAndReturn({data:g.map(b=>({vestingScheduleId:a,periodNumber:b.periodNumber,vestingDate:b.vestingDate,sharesVested:b.sharesVested,cumulativeVested:b.cumulativeVested}))})}async function h(a,b=new Date){let c=await d.prisma.optionGrant.findUnique({where:{id:a},include:{vestingSchedule:{include:{vestingPeriods:{orderBy:{periodNumber:"asc"}}}},exercises:{where:{status:{in:["APPROVED","COMPLETED"]}}}}});if(!c)return{totalShares:0,vestedShares:0,unvestedShares:0,exercisedShares:0,exercisableShares:0,vestedPercent:0,exercisedPercent:0};let e=c.originalQuantity-c.expiredQuantity,f=c.exercises.reduce((a,b)=>a+b.sharesExercised,0),g=0;if(c.vestingSchedule)for(let a of c.vestingSchedule.vestingPeriods)new Date(a.vestingDate)<=b&&(g=a.cumulativeVested);let i=e-g,j=Math.max(0,g-f);return{totalShares:e,vestedShares:g,unvestedShares:i,exercisedShares:f,exercisableShares:j,vestedPercent:e>0?g/e:0,exercisedPercent:e>0?f/e:0}}async function i(a,b=new Date){let c=await d.prisma.optionGrant.findUnique({where:{id:a},include:{vestingSchedule:{include:{vestingPeriods:{orderBy:{periodNumber:"asc"}}}}}});return c?.vestingSchedule?c.vestingSchedule.vestingPeriods.map(a=>{let c=new Date(a.vestingDate);return{periodNumber:a.periodNumber,vestingDate:c,sharesVested:a.sharesVested,cumulativeVested:a.cumulativeVested,isVested:c<=b,isPast:c<b}}):[]}[d,e]=f.then?(await f)():f,a.s(["createVestingPeriodRecords",()=>g,"getVestingPeriodsWithStatus",()=>i,"getVestingProgress",()=>h]),c()}catch(a){c(a)}},!1),47907,a=>{a.n(a.i(39621))},73711,a=>a.a(async(b,c)=>{try{var d=a.i(5246),e=a.i(66518),f=b([e]);async function g(){let a=await (0,d.cookies)(),b=a.get("stakeholder_session")?.value;if(!b)return null;let c=await e.prisma.stakeholderSession.findUnique({where:{token:b},include:{stakeholder:!0}});return!c||c.expiresAt<new Date?null:c.stakeholder}[e]=f.then?(await f)():f,a.s(["getStakeholderFromSession",()=>g]),c()}catch(a){c(a)}},!1),16287,a=>{"use strict";a.s(["PortalExerciseForm",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call PortalExerciseForm() from the server but PortalExerciseForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/app/(portal)/exercises/[grantId]/portal-exercise-form.tsx <module evaluation>","PortalExerciseForm")},31552,a=>{"use strict";a.s(["PortalExerciseForm",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call PortalExerciseForm() from the server but PortalExerciseForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/app/(portal)/exercises/[grantId]/portal-exercise-form.tsx","PortalExerciseForm")},21785,a=>{"use strict";a.i(16287);var b=a.i(31552);a.n(b)},97756,a=>a.a(async(b,c)=>{try{var d=a.i(7997),e=a.i(66518),f=a.i(73711);a.i(70396);var g=a.i(73727),h=a.i(95936),i=a.i(38904),j=a.i(35330),k=a.i(39138),l=a.i(2533),m=a.i(13743),n=a.i(21785),o=b([e,f,l]);async function p(a,b){let c=await e.prisma.optionGrant.findFirst({where:{id:a,stakeholderId:b},include:{company:!0}});if(!c)return null;let d=await (0,l.getVestingProgress)(c.id);return{grant:c,progress:d}}async function q({params:a}){let b=await (0,f.getStakeholderFromSession)();b||(0,g.redirect)("/auth/stakeholder/login");let{grantId:c}=await a,e=await p(c,b.id);e||(0,g.notFound)();let{grant:l,progress:o}=e;return o.exercisableShares<=0?(0,d.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)(h.default,{href:"/exercises",children:(0,d.jsx)(i.Button,{variant:"ghost",size:"icon",children:(0,d.jsx)(m.ArrowLeft,{className:"h-4 w-4"})})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Exercise Options"}),(0,d.jsx)("p",{className:"text-muted-foreground",children:l.securityId})]})]}),(0,d.jsx)(j.Card,{children:(0,d.jsxs)(j.CardContent,{className:"py-8 text-center",children:[(0,d.jsx)("p",{className:"text-muted-foreground",children:"No options available to exercise at this time."}),(0,d.jsx)(h.default,{href:"/exercises",className:"mt-4 inline-block",children:(0,d.jsx)(i.Button,{variant:"outline",children:"Back to Exercises"})})]})})]}):(0,d.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)(h.default,{href:"/exercises",children:(0,d.jsx)(i.Button,{variant:"ghost",size:"icon",children:(0,d.jsx)(m.ArrowLeft,{className:"h-4 w-4"})})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Exercise Options"}),(0,d.jsx)("p",{className:"text-muted-foreground",children:l.securityId})]})]}),(0,d.jsxs)(j.Card,{children:[(0,d.jsx)(j.CardHeader,{children:(0,d.jsx)(j.CardTitle,{children:"Exercise Summary"})}),(0,d.jsx)(j.CardContent,{children:(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm text-muted-foreground",children:"Company"}),(0,d.jsx)("p",{className:"font-medium",children:l.company.name})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm text-muted-foreground",children:"Grant"}),(0,d.jsx)("p",{className:"font-medium",children:l.securityId})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm text-muted-foreground",children:"Available to Exercise"}),(0,d.jsx)("p",{className:"font-medium text-green-600 font-mono",children:(0,k.formatNumber)(o.exercisableShares)})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm text-muted-foreground",children:"Exercise Price"}),(0,d.jsx)("p",{className:"font-medium font-mono",children:(0,k.formatCurrency)(Number(l.exercisePrice))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm text-muted-foreground",children:"Total Vested"}),(0,d.jsx)("p",{className:"font-medium font-mono",children:(0,k.formatNumber)(o.vestedShares)})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm text-muted-foreground",children:"Already Exercised"}),(0,d.jsx)("p",{className:"font-medium font-mono",children:(0,k.formatNumber)(o.exercisedShares)})]})]})})]}),(0,d.jsx)(n.PortalExerciseForm,{grantId:l.id,exercisableShares:o.exercisableShares,exercisePrice:Number(l.exercisePrice)})]})}[e,f,l]=o.then?(await o)():o,a.s(["default",()=>q,"dynamic",0,"force-dynamic"]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__dcc7ed8c._.js.map