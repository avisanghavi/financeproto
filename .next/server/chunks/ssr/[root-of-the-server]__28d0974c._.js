module.exports=[50227,(a,b,c)=>{b.exports=a.x("node:path",()=>require("node:path"))},57764,(a,b,c)=>{b.exports=a.x("node:url",()=>require("node:url"))},84941,(a,b,c)=>{b.exports=a.x("@prisma/client-2c3a283f134fdcb6/runtime/client",()=>require("@prisma/client-2c3a283f134fdcb6/runtime/client"))},23862,a=>a.a(async(b,c)=>{try{let b=await a.y("pg-587764f78a6c7a9c");a.n(b),c()}catch(a){c(a)}},!0),63681,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={RequestCookies:function(){return f.RequestCookies},ResponseCookies:function(){return f.ResponseCookies},stringifyCookie:function(){return f.stringifyCookie}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(36226)},28340,(a,b,c)=>{"use strict";function d(){let a,b,c=new Promise((c,d)=>{a=c,b=d});return{resolve:a,reject:b,promise:c}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"createPromiseWithResolvers",{enumerable:!0,get:function(){return d}})},31382,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e={RenderStage:function(){return i},StagedRenderingController:function(){return j}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let g=a.r(50640),h=a.r(28340);var i=((d={})[d.Before=1]="Before",d[d.Static=2]="Static",d[d.Runtime=3]="Runtime",d[d.Dynamic=4]="Dynamic",d[d.Abandoned=5]="Abandoned",d);class j{constructor(a=null,b){this.abortSignal=a,this.hasRuntimePrefetch=b,this.currentStage=1,this.staticInterruptReason=null,this.runtimeInterruptReason=null,this.staticStageEndTime=1/0,this.runtimeStageEndTime=1/0,this.runtimeStageListeners=[],this.dynamicStageListeners=[],this.runtimeStagePromise=(0,h.createPromiseWithResolvers)(),this.dynamicStagePromise=(0,h.createPromiseWithResolvers)(),this.mayAbandon=!1,a&&(a.addEventListener("abort",()=>{let{reason:b}=a;this.currentStage<3&&(this.runtimeStagePromise.promise.catch(k),this.runtimeStagePromise.reject(b)),(this.currentStage<4||5===this.currentStage)&&(this.dynamicStagePromise.promise.catch(k),this.dynamicStagePromise.reject(b))},{once:!0}),this.mayAbandon=!0)}onStage(a,b){if(this.currentStage>=a)b();else if(3===a)this.runtimeStageListeners.push(b);else if(4===a)this.dynamicStageListeners.push(b);else throw Object.defineProperty(new g.InvariantError(`Invalid render stage: ${a}`),"__NEXT_ERROR_CODE",{value:"E881",enumerable:!1,configurable:!0})}canSyncInterrupt(){if(1===this.currentStage)return!1;let a=this.hasRuntimePrefetch?4:3;return this.currentStage<a}syncInterruptCurrentStageWithReason(a){if(1!==this.currentStage){if(this.mayAbandon)return this.abandonRenderImpl();switch(this.currentStage){case 2:this.staticInterruptReason=a,this.advanceStage(4);return;case 3:this.hasRuntimePrefetch&&(this.runtimeInterruptReason=a,this.advanceStage(4));return}}}getStaticInterruptReason(){return this.staticInterruptReason}getRuntimeInterruptReason(){return this.runtimeInterruptReason}getStaticStageEndTime(){return this.staticStageEndTime}getRuntimeStageEndTime(){return this.runtimeStageEndTime}abandonRender(){if(!this.mayAbandon)throw Object.defineProperty(new g.InvariantError("`abandonRender` called on a stage controller that cannot be abandoned."),"__NEXT_ERROR_CODE",{value:"E938",enumerable:!1,configurable:!0});this.abandonRenderImpl()}abandonRenderImpl(){let{currentStage:a}=this;switch(a){case 2:this.currentStage=5,this.resolveRuntimeStage();return;case 3:this.currentStage=5;return}}advanceStage(a){if(a<=this.currentStage)return;let b=this.currentStage;if(this.currentStage=a,b<3&&a>=3&&(this.staticStageEndTime=performance.now()+performance.timeOrigin,this.resolveRuntimeStage()),b<4&&a>=4){this.runtimeStageEndTime=performance.now()+performance.timeOrigin,this.resolveDynamicStage();return}}resolveRuntimeStage(){let a=this.runtimeStageListeners;for(let b=0;b<a.length;b++)a[b]();a.length=0,this.runtimeStagePromise.resolve()}resolveDynamicStage(){let a=this.dynamicStageListeners;for(let b=0;b<a.length;b++)a[b]();a.length=0,this.dynamicStagePromise.resolve()}getStagePromise(a){switch(a){case 3:return this.runtimeStagePromise.promise;case 4:return this.dynamicStagePromise.promise;default:throw Object.defineProperty(new g.InvariantError(`Invalid render stage: ${a}`),"__NEXT_ERROR_CODE",{value:"E881",enumerable:!1,configurable:!0})}}waitForStage(a){return this.getStagePromise(a)}delayUntilStage(a,b,c){var d,e,f;let g,h=(d=this.getStagePromise(a),e=b,f=c,g=new Promise((a,b)=>{d.then(a.bind(null,f),b)}),void 0!==e&&(g.displayName=e),g);return this.abortSignal&&h.catch(k),h}}function k(){}},4712,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={ActionDidNotRevalidate:function(){return f},ActionDidRevalidateDynamicOnly:function(){return h},ActionDidRevalidateStaticAndDynamic:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=0,g=1,h=2},40062,a=>a.a(async(b,c)=>{try{var d=a.i(37936),e=a.i(66518),f=a.i(18558),g=a.i(53112),h=a.i(13095),i=b([e]);[e]=i.then?(await i)():i;let p=g.z.object({name:g.z.string().min(1,"Company name is required"),legalName:g.z.string().optional(),incorporationDate:g.z.string().min(1,"Incorporation date is required"),incorporationState:g.z.string().min(1,"Incorporation state is required"),authorizedShares:g.z.coerce.number().int().positive("Authorized shares must be positive"),parValue:g.z.coerce.number().positive("Par value must be positive")});async function j(a,b){let c=p.safeParse({name:b.get("name"),legalName:b.get("legalName")||void 0,incorporationDate:b.get("incorporationDate"),incorporationState:b.get("incorporationState"),authorizedShares:b.get("authorizedShares"),parValue:b.get("parValue")});if(!c.success)return{errors:c.error.flatten().fieldErrors};try{if(await e.prisma.company.findFirst())return{errors:{_form:["A company already exists. Please edit the existing company."]}};await e.prisma.company.create({data:{name:c.data.name,legalName:c.data.legalName||null,incorporationDate:new Date(c.data.incorporationDate),incorporationState:c.data.incorporationState,authorizedShares:c.data.authorizedShares,parValue:c.data.parValue}}),(0,f.revalidatePath)("/settings"),(0,f.revalidatePath)("/")}catch(a){return console.error("Error creating company:",a),{errors:{_form:["Failed to create company. Please try again."]}}}return{success:!0}}async function k(a,b){let c=b.get("id"),d=p.safeParse({name:b.get("name"),legalName:b.get("legalName")||void 0,incorporationDate:b.get("incorporationDate"),incorporationState:b.get("incorporationState"),authorizedShares:b.get("authorizedShares"),parValue:b.get("parValue")});if(!d.success)return{errors:d.error.flatten().fieldErrors};try{await e.prisma.company.update({where:{id:c},data:{name:d.data.name,legalName:d.data.legalName||null,incorporationDate:new Date(d.data.incorporationDate),incorporationState:d.data.incorporationState,authorizedShares:d.data.authorizedShares,parValue:d.data.parValue}}),(0,f.revalidatePath)("/settings"),(0,f.revalidatePath)("/")}catch(a){return console.error("Error updating company:",a),{errors:{_form:["Failed to update company. Please try again."]}}}return{success:!0}}let q=g.z.object({name:g.z.string().min(1,"Share class name is required"),type:g.z.enum(["COMMON","PREFERRED"]),authorizedShares:g.z.coerce.number().int().positive("Authorized shares must be positive"),pricePerShare:g.z.coerce.number().positive("Price per share must be positive"),conversionRatio:g.z.coerce.number().positive().optional(),liquidationPreference:g.z.coerce.number().optional(),liquidationMultiple:g.z.coerce.number().optional(),participatingPreferred:g.z.coerce.boolean().optional(),seniority:g.z.coerce.number().int().optional()});async function l(a,b){let c=b.get("companyId"),d=q.safeParse({name:b.get("name"),type:b.get("type"),authorizedShares:b.get("authorizedShares"),pricePerShare:b.get("pricePerShare"),conversionRatio:b.get("conversionRatio")||void 0,liquidationPreference:b.get("liquidationPreference")||void 0,liquidationMultiple:b.get("liquidationMultiple")||void 0,participatingPreferred:"true"===b.get("participatingPreferred"),seniority:b.get("seniority")||void 0});if(!d.success)return{errors:d.error.flatten().fieldErrors};try{await e.prisma.shareClass.create({data:{companyId:c,name:d.data.name,type:d.data.type,authorizedShares:d.data.authorizedShares,pricePerShare:d.data.pricePerShare,conversionRatio:d.data.conversionRatio??1,liquidationPreference:d.data.liquidationPreference,liquidationMultiple:d.data.liquidationMultiple,participatingPreferred:d.data.participatingPreferred??!1,seniority:d.data.seniority??0}}),(0,f.revalidatePath)("/settings")}catch(a){return console.error("Error creating share class:",a),{errors:{_form:["Failed to create share class. Please try again."]}}}return{success:!0}}async function m(a){try{let b=await e.prisma.shareCertificate.count({where:{shareClassId:a}});if(b>0)return{error:`Cannot delete share class. It has ${b} certificate(s) associated with it.`};return await e.prisma.shareClass.delete({where:{id:a}}),(0,f.revalidatePath)("/settings"),{}}catch(a){return console.error("Error deleting share class:",a),{error:"Failed to delete share class."}}}let r=g.z.object({name:g.z.string().min(1,"Plan name is required"),totalPoolSize:g.z.coerce.number().int().positive("Pool size must be positive"),boardApprovalDate:g.z.string().min(1,"Board approval date is required"),expirationDate:g.z.string().min(1,"Expiration date is required")});async function n(a,b){let c=b.get("companyId"),d=r.safeParse({name:b.get("name"),totalPoolSize:b.get("totalPoolSize"),boardApprovalDate:b.get("boardApprovalDate"),expirationDate:b.get("expirationDate")});if(!d.success)return{errors:d.error.flatten().fieldErrors};try{await e.prisma.equityPlan.create({data:{companyId:c,name:d.data.name,totalPoolSize:d.data.totalPoolSize,availableShares:d.data.totalPoolSize,boardApprovalDate:new Date(d.data.boardApprovalDate),expirationDate:new Date(d.data.expirationDate)}}),(0,f.revalidatePath)("/settings")}catch(a){return console.error("Error creating equity plan:",a),{errors:{_form:["Failed to create equity plan. Please try again."]}}}return{success:!0}}async function o(a){try{let b=await e.prisma.optionGrant.count({where:{equityPlanId:a}});if(b>0)return{error:`Cannot delete equity plan. It has ${b} grant(s) associated with it.`};return await e.prisma.equityPlan.delete({where:{id:a}}),(0,f.revalidatePath)("/settings"),{}}catch(a){return console.error("Error deleting equity plan:",a),{error:"Failed to delete equity plan."}}}(0,h.ensureServerEntryExports)([j,k,l,m,n,o]),(0,d.registerServerReference)(j,"60b1ce4db9bde9743708da32f4cf4c6b122b2c1611",null),(0,d.registerServerReference)(k,"606889f43c5f260c2a733455bb8f871e9148c117bb",null),(0,d.registerServerReference)(l,"60058a6e723404676ad799953bb5ba1d30c72ceefb",null),(0,d.registerServerReference)(m,"40d0788548af97c425a00c116775696b4b549ac5fa",null),(0,d.registerServerReference)(n,"600983f5a7b451e8cfbe74dc1fb45f7af3f8527515",null),(0,d.registerServerReference)(o,"4004d1d0caa15e397d59be83308f954a9edd1ea4bd",null),a.s(["createCompany",()=>j,"createEquityPlan",()=>n,"createShareClass",()=>l,"deleteEquityPlan",()=>o,"deleteShareClass",()=>m,"updateCompany",()=>k]),c()}catch(a){c(a)}},!1),66710,a=>a.a(async(b,c)=>{try{var d=a.i(40062),e=b([d]);[d]=e.then?(await e)():e,a.s([]),c()}catch(a){c(a)}},!1),7188,a=>a.a(async(b,c)=>{try{var d=a.i(66710),e=a.i(40062),f=b([d,e]);[d,e]=f.then?(await f)():f,a.s(["4004d1d0caa15e397d59be83308f954a9edd1ea4bd",()=>e.deleteEquityPlan,"40d0788548af97c425a00c116775696b4b549ac5fa",()=>e.deleteShareClass,"60058a6e723404676ad799953bb5ba1d30c72ceefb",()=>e.createShareClass,"600983f5a7b451e8cfbe74dc1fb45f7af3f8527515",()=>e.createEquityPlan,"606889f43c5f260c2a733455bb8f871e9148c117bb",()=>e.updateCompany,"60b1ce4db9bde9743708da32f4cf4c6b122b2c1611",()=>e.createCompany]),c()}catch(a){c(a)}},!1),16005,a=>{a.v(b=>Promise.all(["server/chunks/ssr/[externals]_node:buffer_00e2e67a._.js"].map(b=>a.l(b))).then(()=>b(51615)))},18707,a=>{a.v(b=>Promise.all(["server/chunks/ssr/2e4a4_@prisma_client_runtime_query_compiler_fast_bg_postgresql_mjs_35c4194d._.js"].map(b=>a.l(b))).then(()=>b(7142)))},80599,a=>{a.v(b=>Promise.all(["server/chunks/ssr/9c9c5_client_runtime_query_compiler_fast_bg_postgresql_wasm-base64_mjs_9e69af0b._.js"].map(b=>a.l(b))).then(()=>b(17734)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__28d0974c._.js.map