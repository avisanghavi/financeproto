{"version":3,"sources":["../../../../src/components/portal-sidebar.tsx/__nextjs-internal-proxy.mjs","../../../../src/app/%28portal%29/layout.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const PortalSidebar = registerClientReference(\n    function() { throw new Error(\"Attempted to call PortalSidebar() from the server but PortalSidebar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/portal-sidebar.tsx\",\n    \"PortalSidebar\",\n);\n","import { cookies } from \"next/headers\";\nimport { redirect } from \"next/navigation\";\nimport { prisma } from \"@/lib/prisma\";\nimport { PortalSidebar } from \"@/components/portal-sidebar\";\n\nasync function getStakeholderFromSession() {\n  const cookieStore = await cookies();\n  const sessionToken = cookieStore.get(\"stakeholder_session\")?.value;\n\n  if (!sessionToken) {\n    return null;\n  }\n\n  const session = await prisma.stakeholderSession.findUnique({\n    where: { token: sessionToken },\n    include: { stakeholder: true },\n  });\n\n  if (!session || session.expiresAt < new Date()) {\n    return null;\n  }\n\n  return session.stakeholder;\n}\n\nexport default async function PortalLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const stakeholder = await getStakeholderFromSession();\n\n  if (!stakeholder) {\n    redirect(\"/auth/stakeholder/login\");\n  }\n\n  return (\n    <div className=\"flex h-screen\">\n      <PortalSidebar\n        stakeholderName={stakeholder.name}\n        stakeholderEmail={stakeholder.email}\n      />\n      <main className=\"flex-1 overflow-auto bg-gray-50\">\n        <div className=\"p-8\">{children}</div>\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"oEAEO,IAAM,EAAgB,CAAA,EAAA,AAD7B,EAAA,CAAA,CAAA,OAC6B,uBAAA,AAAuB,EAChD,WAAa,MAAM,AAAI,MAAM,wOAA0O,EACvQ,kEACA,qEAHG,IAAM,EAAgB,CAAA,EAAA,AAD7B,EAAA,CAAA,CAAA,OAC6B,uBAAA,AAAuB,EAChD,WAAa,MAAM,AAAI,MAAM,wOAA0O,EACvQ,8CACA,0HCLJ,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,gBAEA,eAAe,IACb,IAAM,EAAc,MAAM,CAAA,EAAA,EAAA,OAAA,AAAO,IAC3B,EAAe,EAAY,GAAG,CAAC,wBAAwB,MAE7D,GAAI,CAAC,EACH,OAAO,KAGT,AAJmB,IAIb,EAAU,MAAM,EAAA,MAAM,CAAC,kBAAkB,CAAC,UAAU,CAAC,CACzD,MAAO,CAAE,MAAO,CAAa,EAC7B,QAAS,CAAE,aAAa,CAAK,CAC/B,SAEI,AAAJ,CAAK,GAAW,EAAQ,SAAS,CAAG,IAAI,KAC/B,GADuC,EAIzC,EAAQ,WAAW,AAC5B,CAEe,eAAe,EAAa,UACzC,CAAQ,CAGT,EACC,IAAM,EAAc,MAAM,IAM1B,OAJK,AAAD,GACF,CAAA,EAAA,EAAA,KADgB,GAChB,AAAQ,EAAC,2BAIT,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CACZ,gBAAiB,EAAY,IAAI,CACjC,iBAAkB,EAAY,KAAK,GAErC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,2CACd,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,eAAO,QAI9B","ignoreList":[0]}