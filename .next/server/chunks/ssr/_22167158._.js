module.exports=[30505,a=>{"use strict";a.s(["Tabs",()=>c,"TabsContent",()=>d,"TabsList",()=>e,"TabsTrigger",()=>f]);var b=a.i(11857);let c=(0,b.registerClientReference)(function(){throw Error("Attempted to call Tabs() from the server but Tabs is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/tabs.tsx <module evaluation>","Tabs"),d=(0,b.registerClientReference)(function(){throw Error("Attempted to call TabsContent() from the server but TabsContent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/tabs.tsx <module evaluation>","TabsContent"),e=(0,b.registerClientReference)(function(){throw Error("Attempted to call TabsList() from the server but TabsList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/tabs.tsx <module evaluation>","TabsList"),f=(0,b.registerClientReference)(function(){throw Error("Attempted to call TabsTrigger() from the server but TabsTrigger is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/tabs.tsx <module evaluation>","TabsTrigger")},37191,a=>{"use strict";a.s(["Tabs",()=>c,"TabsContent",()=>d,"TabsList",()=>e,"TabsTrigger",()=>f]);var b=a.i(11857);let c=(0,b.registerClientReference)(function(){throw Error("Attempted to call Tabs() from the server but Tabs is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/tabs.tsx","Tabs"),d=(0,b.registerClientReference)(function(){throw Error("Attempted to call TabsContent() from the server but TabsContent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/tabs.tsx","TabsContent"),e=(0,b.registerClientReference)(function(){throw Error("Attempted to call TabsList() from the server but TabsList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/tabs.tsx","TabsList"),f=(0,b.registerClientReference)(function(){throw Error("Attempted to call TabsTrigger() from the server but TabsTrigger is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/tabs.tsx","TabsTrigger")},73083,a=>{"use strict";a.i(30505);var b=a.i(37191);a.n(b)},60612,a=>{"use strict";let b=(0,a.i(1269).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],60612)},54776,a=>a.a(async(b,c)=>{try{var d=a.i(7997),e=a.i(66518);a.i(70396);var f=a.i(73727),g=a.i(95936),h=a.i(38904),i=a.i(19637),j=a.i(35330),k=a.i(73083),l=a.i(45310),m=a.i(39138),n=a.i(19311),o=a.i(2533),p=a.i(16448),q=a.i(13743),r=a.i(70683),s=a.i(40020),t=a.i(46840),u=a.i(60612),v=a.i(10696),w=a.i(56603),x=a.i(16660),y=b([e,n,o]);async function z(a){return await e.prisma.optionGrant.findUnique({where:{id:a},include:{stakeholder:!0,equityPlan:!0,company:!0,vestingSchedule:{include:{vestingPeriods:{orderBy:{periodNumber:"asc"}}}},exercises:{include:{shareCertificate:!0},orderBy:{exerciseDate:"desc"}},exercisePeriods:!0}})}async function A({params:a}){let{id:b}=await a,c=await z(b);c||(0,f.notFound)();let e=await (0,o.getVestingProgress)(c.id),y=await (0,o.getVestingPeriodsWithStatus)(c.id),A=c.exercises.reduce((a,b)=>a+b.sharesExercised,0),B=c.originalQuantity-A-c.expiredQuantity,C=c.vestingSchedule?(0,n.getVestingDescription)({cliffMonths:c.vestingSchedule.cliffMonths,cliffPercentage:c.vestingSchedule.cliffPercentage,totalPeriods:c.vestingSchedule.totalPeriods,periodUnit:c.vestingSchedule.periodUnit}):"No vesting schedule";return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)(g.default,{href:"/options",children:(0,d.jsx)(h.Button,{variant:"ghost",size:"icon",children:(0,d.jsx)(q.ArrowLeft,{className:"h-4 w-4"})})}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:c.securityId}),(0,d.jsx)(i.Badge,{variant:"ACTIVE"===c.status||"PARTIALLY_EXERCISED"===c.status?"active":"secondary",children:c.status.toLowerCase().replace("_"," ")}),(0,d.jsx)(i.Badge,{variant:"ISO"===c.type?"iso":"nso",children:c.type})]}),(0,d.jsx)("p",{className:"text-muted-foreground",children:"Stock Option Grant"})]})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[e.exercisableShares>0&&(0,d.jsx)(g.default,{href:`/options/${c.id}/exercise`,children:(0,d.jsxs)(h.Button,{children:[(0,d.jsx)(x.PlayCircle,{className:"mr-2 h-4 w-4"}),"Exercise Options"]})}),(0,d.jsx)(g.default,{href:`/options/${c.id}/edit`,children:(0,d.jsxs)(h.Button,{variant:"outline",children:[(0,d.jsx)(r.Edit,{className:"mr-2 h-4 w-4"}),"Edit"]})})]})]}),(0,d.jsxs)(k.Tabs,{defaultValue:"details",children:[(0,d.jsxs)(k.TabsList,{children:[(0,d.jsx)(k.TabsTrigger,{value:"details",children:"Details"}),(0,d.jsx)(k.TabsTrigger,{value:"exercise-periods",children:"Exercise Periods"}),(0,d.jsxs)(k.TabsTrigger,{value:"exercises",children:["Exercises (",c.exercises.length,")"]}),(0,d.jsx)(k.TabsTrigger,{value:"vesting",children:"Vesting Schedule"})]}),(0,d.jsx)(k.TabsContent,{value:"details",className:"space-y-6",children:(0,d.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,d.jsxs)(j.Card,{children:[(0,d.jsx)(j.CardHeader,{children:(0,d.jsxs)(j.CardTitle,{className:"flex items-center gap-2",children:[(0,d.jsx)(s.User,{className:"h-5 w-5"}),"Option Grant Holder"]})}),(0,d.jsxs)(j.CardContent,{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm text-muted-foreground",children:"Name"}),(0,d.jsx)("p",{className:"font-medium",children:(0,d.jsx)(g.default,{href:`/stakeholders/${c.stakeholder.id}`,className:"text-blue-600 hover:underline",children:c.stakeholder.name})})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm text-muted-foreground",children:"Email"}),(0,d.jsx)("p",{className:"font-medium",children:c.stakeholder.email})]}),c.grantReason&&(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm text-muted-foreground",children:"Grant Reason"}),(0,d.jsx)("p",{className:"font-medium",children:c.grantReason})]})]})]}),(0,d.jsxs)(j.Card,{children:[(0,d.jsx)(j.CardHeader,{children:(0,d.jsxs)(j.CardTitle,{className:"flex items-center gap-2",children:[(0,d.jsx)(v.Receipt,{className:"h-5 w-5"}),"Quantities"]})}),(0,d.jsx)(j.CardContent,{className:"space-y-4",children:(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm text-muted-foreground",children:"Original"}),(0,d.jsx)("p",{className:"font-medium font-mono",children:(0,m.formatNumber)(c.originalQuantity)})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm text-muted-foreground",children:"Exercised"}),(0,d.jsx)("p",{className:"font-medium font-mono",children:(0,m.formatNumber)(A)})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm text-muted-foreground",children:"Remaining"}),(0,d.jsx)("p",{className:"font-medium font-mono",children:(0,m.formatNumber)(B)})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm text-muted-foreground",children:"Expired"}),(0,d.jsx)("p",{className:"font-medium font-mono",children:(0,m.formatNumber)(c.expiredQuantity)})]}),(0,d.jsxs)("div",{className:"col-span-2",children:[(0,d.jsx)("label",{className:"text-sm text-muted-foreground",children:"Exercise Price"}),(0,d.jsx)("p",{className:"font-medium font-mono",children:(0,m.formatCurrency)(Number(c.exercisePrice))})]})]})})]}),(0,d.jsxs)(j.Card,{children:[(0,d.jsx)(j.CardHeader,{children:(0,d.jsxs)(j.CardTitle,{className:"flex items-center gap-2",children:[(0,d.jsx)(t.Building2,{className:"h-5 w-5"}),"Issuer"]})}),(0,d.jsxs)(j.CardContent,{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm text-muted-foreground",children:"Company"}),(0,d.jsx)("p",{className:"font-medium",children:c.company.name})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm text-muted-foreground",children:"Equity Plan"}),(0,d.jsx)("p",{className:"font-medium",children:c.equityPlan.name})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm text-muted-foreground",children:"Grant Date"}),(0,d.jsx)("p",{className:"font-medium",children:(0,m.formatDate)(c.grantDate)})]}),c.boardApprovalDate&&(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm text-muted-foreground",children:"Board Approval"}),(0,d.jsx)("p",{className:"font-medium",children:(0,m.formatDate)(c.boardApprovalDate)})]}),c.terminationDate&&(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm text-muted-foreground",children:"Terminated"}),(0,d.jsx)("p",{className:"font-medium text-red-600",children:(0,m.formatDate)(c.terminationDate)})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm text-muted-foreground",children:"Expiration Date"}),(0,d.jsx)("p",{className:"font-medium",children:(0,m.formatDate)(c.expirationDate)})]})]})]})]}),(0,d.jsxs)(j.Card,{children:[(0,d.jsx)(j.CardHeader,{children:(0,d.jsxs)(j.CardTitle,{className:"flex items-center gap-2",children:[(0,d.jsx)(u.Calendar,{className:"h-5 w-5"}),"Vesting Summary"]})}),(0,d.jsxs)(j.CardContent,{className:"space-y-4",children:[(0,d.jsx)(p.VestingProgressBar,{total:e.totalShares,vested:e.vestedShares,exercised:e.exercisedShares}),(0,d.jsxs)("div",{className:"text-sm",children:[(0,d.jsxs)("p",{children:[(0,d.jsx)("span",{className:"font-medium",children:(0,m.formatNumber)(e.vestedShares)})," ","of"," ",(0,d.jsx)("span",{className:"font-medium",children:(0,m.formatNumber)(e.totalShares)})," ","options vested (",(0,m.formatPercent)(e.vestedPercent),")"]}),e.exercisableShares>0&&(0,d.jsxs)("p",{className:"text-green-600 mt-1",children:[(0,d.jsx)("span",{className:"font-medium",children:(0,m.formatNumber)(e.exercisableShares)})," ","options available to exercise"]})]}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:C})]})]})]})}),(0,d.jsx)(k.TabsContent,{value:"exercise-periods",children:(0,d.jsxs)(j.Card,{children:[(0,d.jsx)(j.CardHeader,{children:(0,d.jsxs)(j.CardTitle,{className:"flex items-center gap-2",children:[(0,d.jsx)(w.Clock,{className:"h-5 w-5"}),"Post-Termination Exercise Periods"]})}),(0,d.jsx)(j.CardContent,{children:0===c.exercisePeriods.length?(0,d.jsx)("p",{className:"text-muted-foreground",children:"No exercise periods configured"}):(0,d.jsxs)(l.Table,{children:[(0,d.jsx)(l.TableHeader,{children:(0,d.jsxs)(l.TableRow,{children:[(0,d.jsx)(l.TableHead,{children:"Termination Type"}),(0,d.jsx)(l.TableHead,{children:"Exercise Window"})]})}),(0,d.jsx)(l.TableBody,{children:c.exercisePeriods.map(a=>(0,d.jsxs)(l.TableRow,{children:[(0,d.jsx)(l.TableCell,{className:"capitalize",children:a.terminationType.toLowerCase().replace("_"," ")}),(0,d.jsx)(l.TableCell,{children:0===a.duration?"Immediate expiration":`${a.duration} ${a.durationUnit.toLowerCase()}`})]},a.id))})]})})]})}),(0,d.jsx)(k.TabsContent,{value:"exercises",children:(0,d.jsxs)(j.Card,{children:[(0,d.jsxs)(j.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,d.jsx)(j.CardTitle,{children:"Exercise History"}),e.exercisableShares>0&&(0,d.jsx)(g.default,{href:`/options/${c.id}/exercise`,children:(0,d.jsxs)(h.Button,{size:"sm",children:[(0,d.jsx)(x.PlayCircle,{className:"mr-2 h-4 w-4"}),"Exercise Options"]})})]}),(0,d.jsx)(j.CardContent,{children:0===c.exercises.length?(0,d.jsxs)("div",{className:"text-center py-8",children:[(0,d.jsx)("p",{className:"text-muted-foreground mb-4",children:"No exercises performed yet"}),e.exercisableShares>0&&(0,d.jsx)(g.default,{href:`/options/${c.id}/exercise`,children:(0,d.jsxs)(h.Button,{children:[(0,d.jsx)(x.PlayCircle,{className:"mr-2 h-4 w-4"}),"Exercise Options"]})})]}):(0,d.jsxs)(l.Table,{children:[(0,d.jsx)(l.TableHeader,{children:(0,d.jsxs)(l.TableRow,{children:[(0,d.jsx)(l.TableHead,{children:"Certificate"}),(0,d.jsx)(l.TableHead,{className:"text-right",children:"Shares"}),(0,d.jsx)(l.TableHead,{className:"text-right",children:"Exercise Price"}),(0,d.jsx)(l.TableHead,{children:"Date"}),(0,d.jsx)(l.TableHead,{className:"text-right",children:"Total Cost"}),(0,d.jsx)(l.TableHead,{children:"Payment"}),(0,d.jsx)(l.TableHead,{children:"Status"})]})}),(0,d.jsx)(l.TableBody,{children:c.exercises.map(a=>(0,d.jsxs)(l.TableRow,{children:[(0,d.jsx)(l.TableCell,{children:(0,d.jsx)(g.default,{href:`/certificates/${a.shareCertificate.id}`,className:"text-blue-600 hover:underline",children:a.shareCertificate.securityId})}),(0,d.jsx)(l.TableCell,{className:"text-right font-mono",children:(0,m.formatNumber)(a.sharesExercised)}),(0,d.jsx)(l.TableCell,{className:"text-right font-mono",children:(0,m.formatCurrency)(Number(a.exercisePrice))}),(0,d.jsx)(l.TableCell,{children:(0,m.formatDate)(a.exerciseDate)}),(0,d.jsx)(l.TableCell,{className:"text-right font-mono",children:(0,m.formatCurrency)(Number(a.totalCost))}),(0,d.jsx)(l.TableCell,{className:"capitalize",children:a.paymentMethod.toLowerCase().replace("_"," ")}),(0,d.jsx)(l.TableCell,{children:(0,d.jsx)(i.Badge,{variant:"COMPLETED"===a.status?"success":"PENDING"===a.status?"warning":"secondary",children:a.status.toLowerCase()})})]},a.id))})]})})]})}),(0,d.jsx)(k.TabsContent,{value:"vesting",className:"space-y-6",children:c.vestingSchedule?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(j.Card,{children:[(0,d.jsx)(j.CardHeader,{children:(0,d.jsx)(j.CardTitle,{children:"Schedule Summary"})}),(0,d.jsxs)(j.CardContent,{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.vestingSchedule.scheduleName&&(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm text-muted-foreground",children:"Name"}),(0,d.jsx)("p",{className:"font-medium",children:c.vestingSchedule.scheduleName})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm text-muted-foreground",children:"Vesting Start"}),(0,d.jsx)("p",{className:"font-medium",children:(0,m.formatDate)(c.vestingSchedule.vestingStartDate)})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm text-muted-foreground",children:"Cliff"}),(0,d.jsxs)("p",{className:"font-medium",children:[c.vestingSchedule.cliffMonths," months (",(0,m.formatPercent)(Number(c.vestingSchedule.cliffPercentage)),")"]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm text-muted-foreground",children:"Total Periods"}),(0,d.jsxs)("p",{className:"font-medium",children:[c.vestingSchedule.totalPeriods," ",c.vestingSchedule.periodUnit.toLowerCase()]})]})]}),(0,d.jsx)("p",{className:"text-muted-foreground",children:C})]})]}),(0,d.jsxs)(j.Card,{children:[(0,d.jsx)(j.CardHeader,{children:(0,d.jsx)(j.CardTitle,{children:"Vesting Progress"})}),(0,d.jsx)(j.CardContent,{children:(0,d.jsx)(p.VestingProgressBar,{total:e.totalShares,vested:e.vestedShares,exercised:e.exercisedShares})})]}),(0,d.jsxs)(j.Card,{children:[(0,d.jsx)(j.CardHeader,{children:(0,d.jsx)(j.CardTitle,{children:"Vesting Periods"})}),(0,d.jsx)(j.CardContent,{children:(0,d.jsxs)(l.Table,{children:[(0,d.jsx)(l.TableHeader,{children:(0,d.jsxs)(l.TableRow,{children:[(0,d.jsx)(l.TableHead,{children:"Period"}),(0,d.jsx)(l.TableHead,{children:"Vesting Date"}),(0,d.jsx)(l.TableHead,{className:"text-right",children:"Options Vested"}),(0,d.jsx)(l.TableHead,{className:"text-right",children:"Cumulative"}),(0,d.jsx)(l.TableHead,{children:"Status"})]})}),(0,d.jsx)(l.TableBody,{children:y.map(a=>(0,d.jsxs)(l.TableRow,{children:[(0,d.jsx)(l.TableCell,{children:0===a.periodNumber?"Cliff":a.periodNumber}),(0,d.jsx)(l.TableCell,{children:(0,m.formatDate)(a.vestingDate)}),(0,d.jsx)(l.TableCell,{className:"text-right font-mono",children:(0,m.formatNumber)(a.sharesVested)}),(0,d.jsx)(l.TableCell,{className:"text-right font-mono",children:(0,m.formatNumber)(a.cumulativeVested)}),(0,d.jsx)(l.TableCell,{children:a.isVested?(0,d.jsx)(i.Badge,{variant:"success",children:"Vested"}):(0,d.jsx)(i.Badge,{variant:"secondary",children:"Pending"})})]},a.periodNumber))})]})})]})]}):(0,d.jsx)(j.Card,{children:(0,d.jsx)(j.CardContent,{className:"py-8 text-center",children:(0,d.jsx)("p",{className:"text-muted-foreground",children:"No vesting schedule configured for this grant"})})})})]})]})}[e,n,o]=y.then?(await y)():y,a.s(["default",()=>A,"dynamic",0,"force-dynamic"]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=_22167158._.js.map