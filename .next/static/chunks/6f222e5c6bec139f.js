(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,95187,(e,r,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={callServer:function(){return i.callServer},createServerReference:function(){return n.createServerReference},findSourceMapURL:function(){return l.findSourceMapURL}};for(var s in a)Object.defineProperty(t,s,{enumerable:!0,get:a[s]});let i=e.r(32120),l=e.r(92245),n=e.r(35326)},67489,e=>{"use strict";var r=e.i(43476),t=e.i(71645),a=e.i(75157),s=e.i(64659);let i=t.forwardRef(({className:e,children:t,...i},l)=>(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("select",{className:(0,a.cn)("flex h-10 w-full appearance-none rounded-md border border-input bg-background px-3 py-2 pr-8 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:l,...i,children:t}),(0,r.jsx)(s.ChevronDown,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 opacity-50 pointer-events-none"})]}));i.displayName="Select",e.s(["Select",()=>i])},25913,e=>{"use strict";var r=e.i(7670);let t=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,a=r.clsx;e.s(["cva",0,(e,r)=>s=>{var i;if((null==r?void 0:r.variants)==null)return a(e,null==s?void 0:s.class,null==s?void 0:s.className);let{variants:l,defaultVariants:n}=r,d=Object.keys(l).map(e=>{let r=null==s?void 0:s[e],a=null==n?void 0:n[e];if(null===r)return null;let i=t(r)||t(a);return l[e][i]}),o=s&&Object.entries(s).reduce((e,r)=>{let[t,a]=r;return void 0===a||(e[t]=a),e},{});return a(e,d,null==r||null==(i=r.compoundVariants)?void 0:i.reduce((e,r)=>{let{class:t,className:a,...s}=r;return Object.entries(s).every(e=>{let[r,t]=e;return Array.isArray(t)?t.includes({...n,...o}[r]):({...n,...o})[r]===t})?[...e,t,a]:e},[]),null==s?void 0:s.class,null==s?void 0:s.className)}])},15288,e=>{"use strict";var r=e.i(43476),t=e.i(71645),a=e.i(75157);let s=t.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));s.displayName="Card";let i=t.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...t}));i.displayName="CardHeader";let l=t.forwardRef(({className:e,...t},s)=>(0,r.jsx)("h3",{ref:s,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let n=t.forwardRef(({className:e,...t},s)=>(0,r.jsx)("p",{ref:s,className:(0,a.cn)("text-sm text-muted-foreground",e),...t}));n.displayName="CardDescription";let d=t.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,a.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent",t.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,a.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter",e.s(["Card",()=>s,"CardContent",()=>d,"CardDescription",()=>n,"CardHeader",()=>i,"CardTitle",()=>l])},19455,e=>{"use strict";var r=e.i(43476),t=e.i(71645),a=e.i(25913),s=e.i(75157);let i=(0,a.cva)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=t.forwardRef(({className:e,variant:t,size:a,asChild:l=!1,...n},d)=>(0,r.jsx)("button",{className:(0,s.cn)(i({variant:t,size:a,className:e})),ref:d,...n}));l.displayName="Button",e.s(["Button",()=>l])},93479,10204,e=>{"use strict";var r=e.i(43476),t=e.i(71645),a=e.i(75157);let s=t.forwardRef(({className:e,type:t,...s},i)=>(0,r.jsx)("input",{type:t,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...s}));s.displayName="Input",e.s(["Input",()=>s],93479);let i=(0,e.i(25913).cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=t.forwardRef(({className:e,...t},s)=>(0,r.jsx)("label",{ref:s,className:(0,a.cn)(i(),e),...t}));l.displayName="Label",e.s(["Label",()=>l],10204)},64659,e=>{"use strict";let r=(0,e.i(75254).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["ChevronDown",()=>r],64659)},84614,e=>{"use strict";let r=(0,e.i(75254).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>r],84614)},10445,e=>{"use strict";var r=e.i(43476),t=e.i(71645),a=e.i(19455),s=e.i(93479),i=e.i(10204),l=e.i(67489),n=e.i(15288),d=e.i(95187);let o=(0,d.createServerReference)("60421a5fce6afd1b5d5a69344381f4971bb692c5f6",d.callServer,void 0,d.findSourceMapURL,"createConvertible"),c=(0,d.createServerReference)("70fdc3fd8cbed3b0c39a338fa259549966cbbb3b45",d.callServer,void 0,d.findSourceMapURL,"updateConvertible");var u=e.i(84614),p=e.i(7486);let m=(0,e.i(75254).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var x=e.i(78583);function h({stakeholders:e,shareClasses:d,convertible:h}){let f=!!h,[v,j]=(0,t.useState)(h?.type||"SAFE"),b=f?c.bind(null,h.id):o,[g,y,C]=(0,t.useActionState)(b,{errors:{}}),N=e=>e?new Date(e).toISOString().split("T")[0]:"",S=N(new Date);return(0,r.jsxs)("form",{action:y,className:"space-y-6",children:[g.errors?._form&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:g.errors._form.join(", ")}),(0,r.jsxs)(n.Card,{children:[(0,r.jsx)(n.CardHeader,{children:(0,r.jsx)(n.CardTitle,{children:"Instrument Type"})}),(0,r.jsx)(n.CardContent,{children:(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"radio",name:"type",value:"SAFE",checked:"SAFE"===v,onChange:()=>j("SAFE"),className:"w-4 h-4"}),(0,r.jsx)("span",{className:"font-medium",children:"SAFE"}),(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:"(Simple Agreement for Future Equity)"})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"radio",name:"type",value:"CONVERTIBLE_NOTE",checked:"CONVERTIBLE_NOTE"===v,onChange:()=>j("CONVERTIBLE_NOTE"),className:"w-4 h-4"}),(0,r.jsx)("span",{className:"font-medium",children:"Convertible Note"}),(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:"(with interest accrual)"})]})]})})]}),(0,r.jsxs)(n.Card,{children:[(0,r.jsx)(n.CardHeader,{children:(0,r.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,r.jsx)(u.User,{className:"h-5 w-5"}),"Convertible Holder"]})}),(0,r.jsxs)(n.CardContent,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Label,{htmlFor:"stakeholderId",children:"Stakeholder *"}),(0,r.jsxs)(l.Select,{id:"stakeholderId",name:"stakeholderId",defaultValue:h?.stakeholderId||"",required:!0,children:[(0,r.jsx)("option",{value:"",children:"Select a stakeholder..."}),e.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.name," (",e.email,")"]},e.id))]}),g.errors?.stakeholderId&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:g.errors.stakeholderId.join(", ")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Label,{htmlFor:"status",children:"Status"}),(0,r.jsxs)(l.Select,{id:"status",name:"status",defaultValue:h?.status||"OUTSTANDING",children:[(0,r.jsx)("option",{value:"OUTSTANDING",children:"Outstanding"}),(0,r.jsx)("option",{value:"CONVERTED",children:"Converted"}),(0,r.jsx)("option",{value:"CANCELLED",children:"Cancelled"}),(0,r.jsx)("option",{value:"REPAID",children:"Repaid"})]})]})]})]}),(0,r.jsxs)(n.Card,{children:[(0,r.jsx)(n.CardHeader,{children:(0,r.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,r.jsx)(p.Building2,{className:"h-5 w-5"}),"Issuer Information"]})}),(0,r.jsx)(n.CardContent,{className:"space-y-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Label,{htmlFor:"issueDate",children:"Issue Date *"}),(0,r.jsx)(s.Input,{id:"issueDate",name:"issueDate",type:"date",defaultValue:N(h?.issueDate)||S,required:!0}),g.errors?.issueDate&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:g.errors.issueDate.join(", ")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Label,{htmlFor:"boardApprovalDate",children:"Board Approval Date"}),(0,r.jsx)(s.Input,{id:"boardApprovalDate",name:"boardApprovalDate",type:"date",defaultValue:N(h?.boardApprovalDate)})]})]})})]}),(0,r.jsxs)(n.Card,{children:[(0,r.jsx)(n.CardHeader,{children:(0,r.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,r.jsx)(m,{className:"h-5 w-5"}),"Value"]})}),(0,r.jsxs)(n.CardContent,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Label,{htmlFor:"principal",children:"Principal Amount *"}),(0,r.jsx)(s.Input,{id:"principal",name:"principal",type:"number",min:"0",step:"0.01",defaultValue:h?.principal?.toString()||"",placeholder:"100,000",required:!0}),g.errors?.principal&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:g.errors.principal.join(", ")})]}),"CONVERTIBLE_NOTE"===v&&(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Label,{htmlFor:"interestRate",children:"Interest Rate (%) *"}),(0,r.jsx)(s.Input,{id:"interestRate",name:"interestRate",type:"number",min:"0",max:"100",step:"0.01",defaultValue:h?.interestRate?(100*Number(h.interestRate)).toString():"6",placeholder:"6"}),g.errors?.interestRate&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:g.errors.interestRate.join(", ")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Label,{htmlFor:"interestStartDate",children:"Interest Start Date *"}),(0,r.jsx)(s.Input,{id:"interestStartDate",name:"interestStartDate",type:"date",defaultValue:N(h?.interestStartDate)||S})]})]})]})]}),(0,r.jsxs)(n.Card,{children:[(0,r.jsx)(n.CardHeader,{children:(0,r.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,r.jsx)(x.FileText,{className:"h-5 w-5"}),"Terms"]})}),(0,r.jsxs)(n.CardContent,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Label,{htmlFor:"valuationCap",children:"Valuation Cap"}),(0,r.jsx)(s.Input,{id:"valuationCap",name:"valuationCap",type:"number",min:"0",step:"1",defaultValue:h?.valuationCap?.toString()||"",placeholder:"10,000,000"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Leave blank for uncapped"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Label,{htmlFor:"valuationCapType",children:"Cap Type"}),(0,r.jsxs)(l.Select,{id:"valuationCapType",name:"valuationCapType",defaultValue:h?.valuationCapType||"",children:[(0,r.jsx)("option",{value:"",children:"Select..."}),(0,r.jsx)("option",{value:"PRE_MONEY",children:"Pre-Money"}),(0,r.jsx)("option",{value:"POST_MONEY",children:"Post-Money"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Label,{htmlFor:"discount",children:"Discount (%)"}),(0,r.jsx)(s.Input,{id:"discount",name:"discount",type:"number",min:"0",max:"100",step:"1",defaultValue:h?.discount?(100*Number(h.discount)).toString():"",placeholder:"20"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Label,{htmlFor:"convertsToClassId",children:"Converts To Share Class"}),(0,r.jsxs)(l.Select,{id:"convertsToClassId",name:"convertsToClassId",defaultValue:h?.convertsToClassId||"",children:[(0,r.jsx)("option",{value:"",children:"Select..."}),d.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Label,{htmlFor:"liquidityPriority",children:"Liquidity Priority"}),(0,r.jsx)(s.Input,{id:"liquidityPriority",name:"liquidityPriority",type:"number",min:"1",step:"1",defaultValue:h?.liquidityPriority?.toString()||"",placeholder:"1"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Label,{htmlFor:"cashoutMultiplier",children:"Cashout Multiplier"}),(0,r.jsx)(s.Input,{id:"cashoutMultiplier",name:"cashoutMultiplier",type:"number",min:"0",step:"0.1",defaultValue:h?.cashoutMultiplier?.toString()||"",placeholder:"2"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Label,{children:"Conversion Price Basis"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-4 mt-2",children:["VALUATION_CAP","DISCOUNT","QUALIFIED_FINANCING","CHANGE_OF_CONTROL"].map(e=>(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",name:"conversionPriceBasis",value:e,defaultChecked:h?.conversionPriceBasis?.includes(e),className:"w-4 h-4"}),(0,r.jsx)("span",{className:"text-sm capitalize",children:e.toLowerCase().replace("_"," ")})]},e))})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,r.jsx)(a.Button,{type:"button",variant:"outline",onClick:()=>history.back(),children:"Cancel"}),(0,r.jsx)(a.Button,{type:"submit",disabled:C,children:C?f?"Saving...":"Creating...":f?"Save Changes":"SAFE"===v?"Issue SAFE":"Issue Convertible Note"})]})]})}e.s(["ConvertibleForm",()=>h],10445)}]);