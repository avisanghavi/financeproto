{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/jarvis/Desktop/BoardFinance/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\nimport { cn } from \"@/lib/utils\";\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n);\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean;\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    return (\n      <button\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nButton.displayName = \"Button\";\n\nexport { Button, buttonVariants };\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,0RACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,mNAAgB,CAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,qBACE,8OAAC;QACC,WAAW,IAAA,yHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file:///Users/jarvis/Desktop/BoardFinance/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\nexport interface InputProps\n  extends React.InputHTMLAttributes<HTMLInputElement> {}\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nInput.displayName = \"Input\";\n\nexport { Input };\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAKA,MAAM,sBAAQ,mNAAgB,CAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,8OAAC;QACC,MAAM;QACN,WAAW,IAAA,yHAAE,EACX,gWACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 89, "column": 0}, "map": {"version":3,"sources":["file:///Users/jarvis/Desktop/BoardFinance/src/components/ui/label.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\nimport { cn } from \"@/lib/utils\";\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n);\n\nexport interface LabelProps\n  extends React.LabelHTMLAttributes<HTMLLabelElement>,\n    VariantProps<typeof labelVariants> {}\n\nconst Label = React.forwardRef<HTMLLabelElement, LabelProps>(\n  ({ className, ...props }, ref) => {\n    return (\n      <label\n        ref={ref}\n        className={cn(labelVariants(), className)}\n        {...props}\n      />\n    );\n  }\n);\nLabel.displayName = \"Label\";\n\nexport { Label };\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB;AAOF,MAAM,sBAAQ,mNAAgB,CAC5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACxB,qBACE,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,iBAAiB;QAC9B,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":["file:///Users/jarvis/Desktop/BoardFinance/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\";\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\";\n\nconst CardTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n));\nCardTitle.displayName = \"CardTitle\";\n\nconst CardDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <p\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\";\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n));\nCardContent.displayName = \"CardContent\";\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n));\nCardFooter.displayName = \"CardFooter\";\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AACA;;;;AAEA,MAAM,qBAAO,mNAAgB,CAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,4DACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,mNAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,IAAA,yHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 204, "column": 0}, "map": {"version":3,"sources":["file:///Users/jarvis/Desktop/BoardFinance/src/app/%28admin%29/settings/actions.ts"],"sourcesContent":["\"use server\";\n\nimport { prisma } from \"@/lib/prisma\";\nimport { revalidatePath } from \"next/cache\";\nimport { redirect } from \"next/navigation\";\nimport { z } from \"zod\";\n\n// ============================================\n// COMPANY ACTIONS\n// ============================================\n\nconst companySchema = z.object({\n  name: z.string().min(1, \"Company name is required\"),\n  legalName: z.string().optional(),\n  incorporationDate: z.string().min(1, \"Incorporation date is required\"),\n  incorporationState: z.string().min(1, \"Incorporation state is required\"),\n  authorizedShares: z.coerce.number().int().positive(\"Authorized shares must be positive\"),\n  parValue: z.coerce.number().positive(\"Par value must be positive\"),\n});\n\nexport type CompanyFormState = {\n  errors?: {\n    name?: string[];\n    legalName?: string[];\n    incorporationDate?: string[];\n    incorporationState?: string[];\n    authorizedShares?: string[];\n    parValue?: string[];\n    _form?: string[];\n  };\n  success?: boolean;\n};\n\nexport async function createCompany(\n  prevState: CompanyFormState,\n  formData: FormData\n): Promise<CompanyFormState> {\n  const validatedFields = companySchema.safeParse({\n    name: formData.get(\"name\"),\n    legalName: formData.get(\"legalName\") || undefined,\n    incorporationDate: formData.get(\"incorporationDate\"),\n    incorporationState: formData.get(\"incorporationState\"),\n    authorizedShares: formData.get(\"authorizedShares\"),\n    parValue: formData.get(\"parValue\"),\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n    };\n  }\n\n  try {\n    // Check if company already exists\n    const existing = await prisma.company.findFirst();\n    if (existing) {\n      return {\n        errors: {\n          _form: [\"A company already exists. Please edit the existing company.\"],\n        },\n      };\n    }\n\n    await prisma.company.create({\n      data: {\n        name: validatedFields.data.name,\n        legalName: validatedFields.data.legalName || null,\n        incorporationDate: new Date(validatedFields.data.incorporationDate),\n        incorporationState: validatedFields.data.incorporationState,\n        authorizedShares: validatedFields.data.authorizedShares,\n        parValue: validatedFields.data.parValue,\n      },\n    });\n\n    revalidatePath(\"/settings\");\n    revalidatePath(\"/\");\n  } catch (error) {\n    console.error(\"Error creating company:\", error);\n    return {\n      errors: {\n        _form: [\"Failed to create company. Please try again.\"],\n      },\n    };\n  }\n\n  return { success: true };\n}\n\nexport async function updateCompany(\n  prevState: CompanyFormState,\n  formData: FormData\n): Promise<CompanyFormState> {\n  const id = formData.get(\"id\") as string;\n  \n  const validatedFields = companySchema.safeParse({\n    name: formData.get(\"name\"),\n    legalName: formData.get(\"legalName\") || undefined,\n    incorporationDate: formData.get(\"incorporationDate\"),\n    incorporationState: formData.get(\"incorporationState\"),\n    authorizedShares: formData.get(\"authorizedShares\"),\n    parValue: formData.get(\"parValue\"),\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n    };\n  }\n\n  try {\n    await prisma.company.update({\n      where: { id },\n      data: {\n        name: validatedFields.data.name,\n        legalName: validatedFields.data.legalName || null,\n        incorporationDate: new Date(validatedFields.data.incorporationDate),\n        incorporationState: validatedFields.data.incorporationState,\n        authorizedShares: validatedFields.data.authorizedShares,\n        parValue: validatedFields.data.parValue,\n      },\n    });\n\n    revalidatePath(\"/settings\");\n    revalidatePath(\"/\");\n  } catch (error) {\n    console.error(\"Error updating company:\", error);\n    return {\n      errors: {\n        _form: [\"Failed to update company. Please try again.\"],\n      },\n    };\n  }\n\n  return { success: true };\n}\n\n// ============================================\n// SHARE CLASS ACTIONS\n// ============================================\n\nconst shareClassSchema = z.object({\n  name: z.string().min(1, \"Share class name is required\"),\n  type: z.enum([\"COMMON\", \"PREFERRED\"]),\n  authorizedShares: z.coerce.number().int().positive(\"Authorized shares must be positive\"),\n  pricePerShare: z.coerce.number().positive(\"Price per share must be positive\"),\n  conversionRatio: z.coerce.number().positive().optional(),\n  liquidationPreference: z.coerce.number().optional(),\n  liquidationMultiple: z.coerce.number().optional(),\n  participatingPreferred: z.coerce.boolean().optional(),\n  seniority: z.coerce.number().int().optional(),\n});\n\nexport type ShareClassFormState = {\n  errors?: {\n    name?: string[];\n    type?: string[];\n    authorizedShares?: string[];\n    pricePerShare?: string[];\n    _form?: string[];\n  };\n  success?: boolean;\n};\n\nexport async function createShareClass(\n  prevState: ShareClassFormState,\n  formData: FormData\n): Promise<ShareClassFormState> {\n  const companyId = formData.get(\"companyId\") as string;\n  \n  const validatedFields = shareClassSchema.safeParse({\n    name: formData.get(\"name\"),\n    type: formData.get(\"type\"),\n    authorizedShares: formData.get(\"authorizedShares\"),\n    pricePerShare: formData.get(\"pricePerShare\"),\n    conversionRatio: formData.get(\"conversionRatio\") || undefined,\n    liquidationPreference: formData.get(\"liquidationPreference\") || undefined,\n    liquidationMultiple: formData.get(\"liquidationMultiple\") || undefined,\n    participatingPreferred: formData.get(\"participatingPreferred\") === \"true\",\n    seniority: formData.get(\"seniority\") || undefined,\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n    };\n  }\n\n  try {\n    await prisma.shareClass.create({\n      data: {\n        companyId,\n        name: validatedFields.data.name,\n        type: validatedFields.data.type,\n        authorizedShares: validatedFields.data.authorizedShares,\n        pricePerShare: validatedFields.data.pricePerShare,\n        conversionRatio: validatedFields.data.conversionRatio ?? 1,\n        liquidationPreference: validatedFields.data.liquidationPreference,\n        liquidationMultiple: validatedFields.data.liquidationMultiple,\n        participatingPreferred: validatedFields.data.participatingPreferred ?? false,\n        seniority: validatedFields.data.seniority ?? 0,\n      },\n    });\n\n    revalidatePath(\"/settings\");\n  } catch (error) {\n    console.error(\"Error creating share class:\", error);\n    return {\n      errors: {\n        _form: [\"Failed to create share class. Please try again.\"],\n      },\n    };\n  }\n\n  return { success: true };\n}\n\nexport async function deleteShareClass(id: string): Promise<{ error?: string }> {\n  try {\n    // Check if there are any certificates using this share class\n    const certificateCount = await prisma.shareCertificate.count({\n      where: { shareClassId: id },\n    });\n\n    if (certificateCount > 0) {\n      return {\n        error: `Cannot delete share class. It has ${certificateCount} certificate(s) associated with it.`,\n      };\n    }\n\n    await prisma.shareClass.delete({\n      where: { id },\n    });\n\n    revalidatePath(\"/settings\");\n    return {};\n  } catch (error) {\n    console.error(\"Error deleting share class:\", error);\n    return { error: \"Failed to delete share class.\" };\n  }\n}\n\n// ============================================\n// EQUITY PLAN ACTIONS\n// ============================================\n\nconst equityPlanSchema = z.object({\n  name: z.string().min(1, \"Plan name is required\"),\n  totalPoolSize: z.coerce.number().int().positive(\"Pool size must be positive\"),\n  boardApprovalDate: z.string().min(1, \"Board approval date is required\"),\n  expirationDate: z.string().min(1, \"Expiration date is required\"),\n});\n\nexport type EquityPlanFormState = {\n  errors?: {\n    name?: string[];\n    totalPoolSize?: string[];\n    boardApprovalDate?: string[];\n    expirationDate?: string[];\n    _form?: string[];\n  };\n  success?: boolean;\n};\n\nexport async function createEquityPlan(\n  prevState: EquityPlanFormState,\n  formData: FormData\n): Promise<EquityPlanFormState> {\n  const companyId = formData.get(\"companyId\") as string;\n  \n  const validatedFields = equityPlanSchema.safeParse({\n    name: formData.get(\"name\"),\n    totalPoolSize: formData.get(\"totalPoolSize\"),\n    boardApprovalDate: formData.get(\"boardApprovalDate\"),\n    expirationDate: formData.get(\"expirationDate\"),\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n    };\n  }\n\n  try {\n    await prisma.equityPlan.create({\n      data: {\n        companyId,\n        name: validatedFields.data.name,\n        totalPoolSize: validatedFields.data.totalPoolSize,\n        availableShares: validatedFields.data.totalPoolSize, // Initially all shares are available\n        boardApprovalDate: new Date(validatedFields.data.boardApprovalDate),\n        expirationDate: new Date(validatedFields.data.expirationDate),\n      },\n    });\n\n    revalidatePath(\"/settings\");\n  } catch (error) {\n    console.error(\"Error creating equity plan:\", error);\n    return {\n      errors: {\n        _form: [\"Failed to create equity plan. Please try again.\"],\n      },\n    };\n  }\n\n  return { success: true };\n}\n\nexport async function deleteEquityPlan(id: string): Promise<{ error?: string }> {\n  try {\n    // Check if there are any grants using this plan\n    const grantCount = await prisma.optionGrant.count({\n      where: { equityPlanId: id },\n    });\n\n    if (grantCount > 0) {\n      return {\n        error: `Cannot delete equity plan. It has ${grantCount} grant(s) associated with it.`,\n      };\n    }\n\n    await prisma.equityPlan.delete({\n      where: { id },\n    });\n\n    revalidatePath(\"/settings\");\n    return {};\n  } catch (error) {\n    console.error(\"Error deleting equity plan:\", error);\n    return { error: \"Failed to delete equity plan.\" };\n  }\n}\n"],"names":[],"mappings":";;;;;;;MAiCsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,iDAAA"}},
    {"offset": {"line": 218, "column": 0}, "map": {"version":3,"sources":["file:///Users/jarvis/Desktop/BoardFinance/src/app/%28admin%29/settings/actions.ts"],"sourcesContent":["\"use server\";\n\nimport { prisma } from \"@/lib/prisma\";\nimport { revalidatePath } from \"next/cache\";\nimport { redirect } from \"next/navigation\";\nimport { z } from \"zod\";\n\n// ============================================\n// COMPANY ACTIONS\n// ============================================\n\nconst companySchema = z.object({\n  name: z.string().min(1, \"Company name is required\"),\n  legalName: z.string().optional(),\n  incorporationDate: z.string().min(1, \"Incorporation date is required\"),\n  incorporationState: z.string().min(1, \"Incorporation state is required\"),\n  authorizedShares: z.coerce.number().int().positive(\"Authorized shares must be positive\"),\n  parValue: z.coerce.number().positive(\"Par value must be positive\"),\n});\n\nexport type CompanyFormState = {\n  errors?: {\n    name?: string[];\n    legalName?: string[];\n    incorporationDate?: string[];\n    incorporationState?: string[];\n    authorizedShares?: string[];\n    parValue?: string[];\n    _form?: string[];\n  };\n  success?: boolean;\n};\n\nexport async function createCompany(\n  prevState: CompanyFormState,\n  formData: FormData\n): Promise<CompanyFormState> {\n  const validatedFields = companySchema.safeParse({\n    name: formData.get(\"name\"),\n    legalName: formData.get(\"legalName\") || undefined,\n    incorporationDate: formData.get(\"incorporationDate\"),\n    incorporationState: formData.get(\"incorporationState\"),\n    authorizedShares: formData.get(\"authorizedShares\"),\n    parValue: formData.get(\"parValue\"),\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n    };\n  }\n\n  try {\n    // Check if company already exists\n    const existing = await prisma.company.findFirst();\n    if (existing) {\n      return {\n        errors: {\n          _form: [\"A company already exists. Please edit the existing company.\"],\n        },\n      };\n    }\n\n    await prisma.company.create({\n      data: {\n        name: validatedFields.data.name,\n        legalName: validatedFields.data.legalName || null,\n        incorporationDate: new Date(validatedFields.data.incorporationDate),\n        incorporationState: validatedFields.data.incorporationState,\n        authorizedShares: validatedFields.data.authorizedShares,\n        parValue: validatedFields.data.parValue,\n      },\n    });\n\n    revalidatePath(\"/settings\");\n    revalidatePath(\"/\");\n  } catch (error) {\n    console.error(\"Error creating company:\", error);\n    return {\n      errors: {\n        _form: [\"Failed to create company. Please try again.\"],\n      },\n    };\n  }\n\n  return { success: true };\n}\n\nexport async function updateCompany(\n  prevState: CompanyFormState,\n  formData: FormData\n): Promise<CompanyFormState> {\n  const id = formData.get(\"id\") as string;\n  \n  const validatedFields = companySchema.safeParse({\n    name: formData.get(\"name\"),\n    legalName: formData.get(\"legalName\") || undefined,\n    incorporationDate: formData.get(\"incorporationDate\"),\n    incorporationState: formData.get(\"incorporationState\"),\n    authorizedShares: formData.get(\"authorizedShares\"),\n    parValue: formData.get(\"parValue\"),\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n    };\n  }\n\n  try {\n    await prisma.company.update({\n      where: { id },\n      data: {\n        name: validatedFields.data.name,\n        legalName: validatedFields.data.legalName || null,\n        incorporationDate: new Date(validatedFields.data.incorporationDate),\n        incorporationState: validatedFields.data.incorporationState,\n        authorizedShares: validatedFields.data.authorizedShares,\n        parValue: validatedFields.data.parValue,\n      },\n    });\n\n    revalidatePath(\"/settings\");\n    revalidatePath(\"/\");\n  } catch (error) {\n    console.error(\"Error updating company:\", error);\n    return {\n      errors: {\n        _form: [\"Failed to update company. Please try again.\"],\n      },\n    };\n  }\n\n  return { success: true };\n}\n\n// ============================================\n// SHARE CLASS ACTIONS\n// ============================================\n\nconst shareClassSchema = z.object({\n  name: z.string().min(1, \"Share class name is required\"),\n  type: z.enum([\"COMMON\", \"PREFERRED\"]),\n  authorizedShares: z.coerce.number().int().positive(\"Authorized shares must be positive\"),\n  pricePerShare: z.coerce.number().positive(\"Price per share must be positive\"),\n  conversionRatio: z.coerce.number().positive().optional(),\n  liquidationPreference: z.coerce.number().optional(),\n  liquidationMultiple: z.coerce.number().optional(),\n  participatingPreferred: z.coerce.boolean().optional(),\n  seniority: z.coerce.number().int().optional(),\n});\n\nexport type ShareClassFormState = {\n  errors?: {\n    name?: string[];\n    type?: string[];\n    authorizedShares?: string[];\n    pricePerShare?: string[];\n    _form?: string[];\n  };\n  success?: boolean;\n};\n\nexport async function createShareClass(\n  prevState: ShareClassFormState,\n  formData: FormData\n): Promise<ShareClassFormState> {\n  const companyId = formData.get(\"companyId\") as string;\n  \n  const validatedFields = shareClassSchema.safeParse({\n    name: formData.get(\"name\"),\n    type: formData.get(\"type\"),\n    authorizedShares: formData.get(\"authorizedShares\"),\n    pricePerShare: formData.get(\"pricePerShare\"),\n    conversionRatio: formData.get(\"conversionRatio\") || undefined,\n    liquidationPreference: formData.get(\"liquidationPreference\") || undefined,\n    liquidationMultiple: formData.get(\"liquidationMultiple\") || undefined,\n    participatingPreferred: formData.get(\"participatingPreferred\") === \"true\",\n    seniority: formData.get(\"seniority\") || undefined,\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n    };\n  }\n\n  try {\n    await prisma.shareClass.create({\n      data: {\n        companyId,\n        name: validatedFields.data.name,\n        type: validatedFields.data.type,\n        authorizedShares: validatedFields.data.authorizedShares,\n        pricePerShare: validatedFields.data.pricePerShare,\n        conversionRatio: validatedFields.data.conversionRatio ?? 1,\n        liquidationPreference: validatedFields.data.liquidationPreference,\n        liquidationMultiple: validatedFields.data.liquidationMultiple,\n        participatingPreferred: validatedFields.data.participatingPreferred ?? false,\n        seniority: validatedFields.data.seniority ?? 0,\n      },\n    });\n\n    revalidatePath(\"/settings\");\n  } catch (error) {\n    console.error(\"Error creating share class:\", error);\n    return {\n      errors: {\n        _form: [\"Failed to create share class. Please try again.\"],\n      },\n    };\n  }\n\n  return { success: true };\n}\n\nexport async function deleteShareClass(id: string): Promise<{ error?: string }> {\n  try {\n    // Check if there are any certificates using this share class\n    const certificateCount = await prisma.shareCertificate.count({\n      where: { shareClassId: id },\n    });\n\n    if (certificateCount > 0) {\n      return {\n        error: `Cannot delete share class. It has ${certificateCount} certificate(s) associated with it.`,\n      };\n    }\n\n    await prisma.shareClass.delete({\n      where: { id },\n    });\n\n    revalidatePath(\"/settings\");\n    return {};\n  } catch (error) {\n    console.error(\"Error deleting share class:\", error);\n    return { error: \"Failed to delete share class.\" };\n  }\n}\n\n// ============================================\n// EQUITY PLAN ACTIONS\n// ============================================\n\nconst equityPlanSchema = z.object({\n  name: z.string().min(1, \"Plan name is required\"),\n  totalPoolSize: z.coerce.number().int().positive(\"Pool size must be positive\"),\n  boardApprovalDate: z.string().min(1, \"Board approval date is required\"),\n  expirationDate: z.string().min(1, \"Expiration date is required\"),\n});\n\nexport type EquityPlanFormState = {\n  errors?: {\n    name?: string[];\n    totalPoolSize?: string[];\n    boardApprovalDate?: string[];\n    expirationDate?: string[];\n    _form?: string[];\n  };\n  success?: boolean;\n};\n\nexport async function createEquityPlan(\n  prevState: EquityPlanFormState,\n  formData: FormData\n): Promise<EquityPlanFormState> {\n  const companyId = formData.get(\"companyId\") as string;\n  \n  const validatedFields = equityPlanSchema.safeParse({\n    name: formData.get(\"name\"),\n    totalPoolSize: formData.get(\"totalPoolSize\"),\n    boardApprovalDate: formData.get(\"boardApprovalDate\"),\n    expirationDate: formData.get(\"expirationDate\"),\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n    };\n  }\n\n  try {\n    await prisma.equityPlan.create({\n      data: {\n        companyId,\n        name: validatedFields.data.name,\n        totalPoolSize: validatedFields.data.totalPoolSize,\n        availableShares: validatedFields.data.totalPoolSize, // Initially all shares are available\n        boardApprovalDate: new Date(validatedFields.data.boardApprovalDate),\n        expirationDate: new Date(validatedFields.data.expirationDate),\n      },\n    });\n\n    revalidatePath(\"/settings\");\n  } catch (error) {\n    console.error(\"Error creating equity plan:\", error);\n    return {\n      errors: {\n        _form: [\"Failed to create equity plan. Please try again.\"],\n      },\n    };\n  }\n\n  return { success: true };\n}\n\nexport async function deleteEquityPlan(id: string): Promise<{ error?: string }> {\n  try {\n    // Check if there are any grants using this plan\n    const grantCount = await prisma.optionGrant.count({\n      where: { equityPlanId: id },\n    });\n\n    if (grantCount > 0) {\n      return {\n        error: `Cannot delete equity plan. It has ${grantCount} grant(s) associated with it.`,\n      };\n    }\n\n    await prisma.equityPlan.delete({\n      where: { id },\n    });\n\n    revalidatePath(\"/settings\");\n    return {};\n  } catch (error) {\n    console.error(\"Error deleting equity plan:\", error);\n    return { error: \"Failed to delete equity plan.\" };\n  }\n}\n"],"names":[],"mappings":";;;;;;;MAwFsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,iDAAA"}},
    {"offset": {"line": 232, "column": 0}, "map": {"version":3,"sources":["file:///Users/jarvis/Desktop/BoardFinance/src/app/%28admin%29/settings/company-form.tsx"],"sourcesContent":["\"use client\";\n\nimport { useActionState, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { createCompany, updateCompany, type CompanyFormState } from \"./actions\";\nimport { toast } from \"sonner\";\n\ninterface Company {\n  id: string;\n  name: string;\n  legalName: string | null;\n  incorporationDate: string;\n  incorporationState: string;\n  authorizedShares: number;\n  parValue: number;\n}\n\ninterface CompanyFormProps {\n  company: Company | null;\n}\n\nconst US_STATES = [\n  \"AL\", \"AK\", \"AZ\", \"AR\", \"CA\", \"CO\", \"CT\", \"DE\", \"FL\", \"GA\",\n  \"HI\", \"ID\", \"IL\", \"IN\", \"IA\", \"KS\", \"KY\", \"LA\", \"ME\", \"MD\",\n  \"MA\", \"MI\", \"MN\", \"MS\", \"MO\", \"MT\", \"NE\", \"NV\", \"NH\", \"NJ\",\n  \"NM\", \"NY\", \"NC\", \"ND\", \"OH\", \"OK\", \"OR\", \"PA\", \"RI\", \"SC\",\n  \"SD\", \"TN\", \"TX\", \"UT\", \"VT\", \"VA\", \"WA\", \"WV\", \"WI\", \"WY\", \"DC\"\n];\n\nconst initialState: CompanyFormState = {};\n\nexport function CompanyForm({ company }: CompanyFormProps) {\n  const action = company ? updateCompany : createCompany;\n  const [state, formAction, isPending] = useActionState(action, initialState);\n\n  useEffect(() => {\n    if (state.success) {\n      toast.success(company ? \"Company updated successfully\" : \"Company created successfully\");\n    }\n    if (state.errors?._form) {\n      toast.error(state.errors._form[0]);\n    }\n  }, [state, company]);\n\n  const formatDateForInput = (dateStr: string | undefined) => {\n    if (!dateStr) return \"\";\n    const date = new Date(dateStr);\n    return date.toISOString().split(\"T\")[0];\n  };\n\n  return (\n    <Card>\n      <CardContent className=\"pt-6\">\n        <form action={formAction} className=\"space-y-6\">\n          {company && <input type=\"hidden\" name=\"id\" value={company.id} />}\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {/* Company Name */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"name\">Company Name *</Label>\n              <Input\n                id=\"name\"\n                name=\"name\"\n                defaultValue={company?.name ?? \"\"}\n                placeholder=\"Acme Inc\"\n                required\n              />\n              {state.errors?.name && (\n                <p className=\"text-sm text-red-500\">{state.errors.name[0]}</p>\n              )}\n            </div>\n\n            {/* Legal Name */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"legalName\">Legal Name</Label>\n              <Input\n                id=\"legalName\"\n                name=\"legalName\"\n                defaultValue={company?.legalName ?? \"\"}\n                placeholder=\"Acme Incorporated\"\n              />\n              {state.errors?.legalName && (\n                <p className=\"text-sm text-red-500\">{state.errors.legalName[0]}</p>\n              )}\n            </div>\n\n            {/* Incorporation Date */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"incorporationDate\">Incorporation Date *</Label>\n              <Input\n                id=\"incorporationDate\"\n                name=\"incorporationDate\"\n                type=\"date\"\n                defaultValue={formatDateForInput(company?.incorporationDate)}\n                required\n              />\n              {state.errors?.incorporationDate && (\n                <p className=\"text-sm text-red-500\">{state.errors.incorporationDate[0]}</p>\n              )}\n            </div>\n\n            {/* Incorporation State */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"incorporationState\">Incorporation State *</Label>\n              <select\n                id=\"incorporationState\"\n                name=\"incorporationState\"\n                defaultValue={company?.incorporationState ?? \"DE\"}\n                className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring\"\n                required\n              >\n                {US_STATES.map((state) => (\n                  <option key={state} value={state}>\n                    {state}\n                  </option>\n                ))}\n              </select>\n              {state.errors?.incorporationState && (\n                <p className=\"text-sm text-red-500\">{state.errors.incorporationState[0]}</p>\n              )}\n            </div>\n\n            {/* Authorized Shares */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"authorizedShares\">Authorized Shares *</Label>\n              <Input\n                id=\"authorizedShares\"\n                name=\"authorizedShares\"\n                type=\"number\"\n                defaultValue={company?.authorizedShares ?? 10000000}\n                min={1}\n                required\n              />\n              {state.errors?.authorizedShares && (\n                <p className=\"text-sm text-red-500\">{state.errors.authorizedShares[0]}</p>\n              )}\n              <p className=\"text-xs text-muted-foreground\">\n                Total number of shares the company is authorized to issue\n              </p>\n            </div>\n\n            {/* Par Value */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"parValue\">Par Value *</Label>\n              <Input\n                id=\"parValue\"\n                name=\"parValue\"\n                type=\"number\"\n                step=\"0.000001\"\n                defaultValue={company?.parValue ?? 0.0001}\n                min={0.000001}\n                required\n              />\n              {state.errors?.parValue && (\n                <p className=\"text-sm text-red-500\">{state.errors.parValue[0]}</p>\n              )}\n              <p className=\"text-xs text-muted-foreground\">\n                Nominal value per share (typically $0.0001 or $0.00001)\n              </p>\n            </div>\n          </div>\n\n          <div className=\"flex justify-end\">\n            <Button type=\"submit\" disabled={isPending}>\n              {isPending ? \"Saving...\" : company ? \"Update Company\" : \"Create Company\"}\n            </Button>\n          </div>\n        </form>\n      </CardContent>\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 631, "column": 0}, "map": {"version":3,"sources":["file:///Users/jarvis/Desktop/BoardFinance/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\nimport { cn } from \"@/lib/utils\";\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n        success:\n          \"border-transparent bg-green-100 text-green-800\",\n        warning:\n          \"border-transparent bg-yellow-100 text-yellow-800\",\n        info:\n          \"border-transparent bg-blue-100 text-blue-800\",\n        // Security types\n        common:\n          \"border-transparent bg-blue-100 text-blue-800\",\n        preferred:\n          \"border-transparent bg-green-100 text-green-800\",\n        options:\n          \"border-transparent bg-orange-100 text-orange-800\",\n        convertible:\n          \"border-transparent bg-purple-100 text-purple-800\",\n        // Status badges\n        outstanding:\n          \"border-transparent bg-green-100 text-green-800\",\n        active:\n          \"border-transparent bg-green-100 text-green-800\",\n        pending:\n          \"border-transparent bg-yellow-100 text-yellow-800\",\n        cancelled:\n          \"border-transparent bg-red-100 text-red-800\",\n        expired:\n          \"border-transparent bg-gray-100 text-gray-800\",\n        exercised:\n          \"border-transparent bg-blue-100 text-blue-800\",\n        // Option types\n        iso:\n          \"border-transparent bg-indigo-100 text-indigo-800\",\n        nso:\n          \"border-transparent bg-pink-100 text-pink-800\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n);\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants };\n"],"names":[],"mappings":";;;;;;;AACA;AACA;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;YACT,SACE;YACF,SACE;YACF,MACE;YACF,iBAAiB;YACjB,QACE;YACF,WACE;YACF,SACE;YACF,aACE;YACF,gBAAgB;YAChB,aACE;YACF,QACE;YACF,SACE;YACF,WACE;YACF,SACE;YACF,WACE;YACF,eAAe;YACf,KACE;YACF,KACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,8OAAC;QAAI,WAAW,IAAA,yHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE"}},
    {"offset": {"line": 691, "column": 0}, "map": {"version":3,"sources":["file:///Users/jarvis/Desktop/BoardFinance/src/components/ui/dialog.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { X } from \"lucide-react\";\n\ninterface DialogContextValue {\n  open: boolean;\n  setOpen: (open: boolean) => void;\n}\n\nconst DialogContext = React.createContext<DialogContextValue | undefined>(undefined);\n\ninterface DialogProps {\n  open?: boolean;\n  onOpenChange?: (open: boolean) => void;\n  children: React.ReactNode;\n}\n\nconst Dialog = ({ open: controlledOpen, onOpenChange, children }: DialogProps) => {\n  const [uncontrolledOpen, setUncontrolledOpen] = React.useState(false);\n  const open = controlledOpen ?? uncontrolledOpen;\n  const setOpen = onOpenChange ?? setUncontrolledOpen;\n\n  return (\n    <DialogContext.Provider value={{ open, setOpen }}>\n      {children}\n    </DialogContext.Provider>\n  );\n};\n\nconst DialogTrigger = React.forwardRef<\n  HTMLButtonElement,\n  React.ButtonHTMLAttributes<HTMLButtonElement>\n>(({ children, ...props }, ref) => {\n  const context = React.useContext(DialogContext);\n  if (!context) throw new Error(\"DialogTrigger must be used within Dialog\");\n\n  return (\n    <button\n      ref={ref}\n      type=\"button\"\n      onClick={() => context.setOpen(true)}\n      {...props}\n    >\n      {children}\n    </button>\n  );\n});\nDialogTrigger.displayName = \"DialogTrigger\";\n\nconst DialogPortal = ({ children }: { children: React.ReactNode }) => {\n  const context = React.useContext(DialogContext);\n  if (!context) throw new Error(\"DialogPortal must be used within Dialog\");\n  if (!context.open) return null;\n\n  return <>{children}</>;\n};\n\nconst DialogOverlay = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const context = React.useContext(DialogContext);\n  if (!context) throw new Error(\"DialogOverlay must be used within Dialog\");\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n        className\n      )}\n      onClick={() => context.setOpen(false)}\n      {...props}\n    />\n  );\n});\nDialogOverlay.displayName = \"DialogOverlay\";\n\nconst DialogContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, children, ...props }, ref) => {\n  const context = React.useContext(DialogContext);\n  if (!context) throw new Error(\"DialogContent must be used within Dialog\");\n\n  if (!context.open) return null;\n\n  return (\n    <DialogPortal>\n      <DialogOverlay />\n      <div\n        ref={ref}\n        className={cn(\n          \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 sm:rounded-lg\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n        <button\n          className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none\"\n          onClick={() => context.setOpen(false)}\n        >\n          <X className=\"h-4 w-4\" />\n          <span className=\"sr-only\">Close</span>\n        </button>\n      </div>\n    </DialogPortal>\n  );\n});\nDialogContent.displayName = \"DialogContent\";\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n);\nDialogHeader.displayName = \"DialogHeader\";\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n);\nDialogFooter.displayName = \"DialogFooter\";\n\nconst DialogTitle = React.forwardRef<\n  HTMLHeadingElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h2\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n));\nDialogTitle.displayName = \"DialogTitle\";\n\nconst DialogDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <p\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nDialogDescription.displayName = \"DialogDescription\";\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 875, "column": 0}, "map": {"version":3,"sources":["file:///Users/jarvis/Desktop/BoardFinance/src/app/%28admin%29/settings/actions.ts"],"sourcesContent":["\"use server\";\n\nimport { prisma } from \"@/lib/prisma\";\nimport { revalidatePath } from \"next/cache\";\nimport { redirect } from \"next/navigation\";\nimport { z } from \"zod\";\n\n// ============================================\n// COMPANY ACTIONS\n// ============================================\n\nconst companySchema = z.object({\n  name: z.string().min(1, \"Company name is required\"),\n  legalName: z.string().optional(),\n  incorporationDate: z.string().min(1, \"Incorporation date is required\"),\n  incorporationState: z.string().min(1, \"Incorporation state is required\"),\n  authorizedShares: z.coerce.number().int().positive(\"Authorized shares must be positive\"),\n  parValue: z.coerce.number().positive(\"Par value must be positive\"),\n});\n\nexport type CompanyFormState = {\n  errors?: {\n    name?: string[];\n    legalName?: string[];\n    incorporationDate?: string[];\n    incorporationState?: string[];\n    authorizedShares?: string[];\n    parValue?: string[];\n    _form?: string[];\n  };\n  success?: boolean;\n};\n\nexport async function createCompany(\n  prevState: CompanyFormState,\n  formData: FormData\n): Promise<CompanyFormState> {\n  const validatedFields = companySchema.safeParse({\n    name: formData.get(\"name\"),\n    legalName: formData.get(\"legalName\") || undefined,\n    incorporationDate: formData.get(\"incorporationDate\"),\n    incorporationState: formData.get(\"incorporationState\"),\n    authorizedShares: formData.get(\"authorizedShares\"),\n    parValue: formData.get(\"parValue\"),\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n    };\n  }\n\n  try {\n    // Check if company already exists\n    const existing = await prisma.company.findFirst();\n    if (existing) {\n      return {\n        errors: {\n          _form: [\"A company already exists. Please edit the existing company.\"],\n        },\n      };\n    }\n\n    await prisma.company.create({\n      data: {\n        name: validatedFields.data.name,\n        legalName: validatedFields.data.legalName || null,\n        incorporationDate: new Date(validatedFields.data.incorporationDate),\n        incorporationState: validatedFields.data.incorporationState,\n        authorizedShares: validatedFields.data.authorizedShares,\n        parValue: validatedFields.data.parValue,\n      },\n    });\n\n    revalidatePath(\"/settings\");\n    revalidatePath(\"/\");\n  } catch (error) {\n    console.error(\"Error creating company:\", error);\n    return {\n      errors: {\n        _form: [\"Failed to create company. Please try again.\"],\n      },\n    };\n  }\n\n  return { success: true };\n}\n\nexport async function updateCompany(\n  prevState: CompanyFormState,\n  formData: FormData\n): Promise<CompanyFormState> {\n  const id = formData.get(\"id\") as string;\n  \n  const validatedFields = companySchema.safeParse({\n    name: formData.get(\"name\"),\n    legalName: formData.get(\"legalName\") || undefined,\n    incorporationDate: formData.get(\"incorporationDate\"),\n    incorporationState: formData.get(\"incorporationState\"),\n    authorizedShares: formData.get(\"authorizedShares\"),\n    parValue: formData.get(\"parValue\"),\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n    };\n  }\n\n  try {\n    await prisma.company.update({\n      where: { id },\n      data: {\n        name: validatedFields.data.name,\n        legalName: validatedFields.data.legalName || null,\n        incorporationDate: new Date(validatedFields.data.incorporationDate),\n        incorporationState: validatedFields.data.incorporationState,\n        authorizedShares: validatedFields.data.authorizedShares,\n        parValue: validatedFields.data.parValue,\n      },\n    });\n\n    revalidatePath(\"/settings\");\n    revalidatePath(\"/\");\n  } catch (error) {\n    console.error(\"Error updating company:\", error);\n    return {\n      errors: {\n        _form: [\"Failed to update company. Please try again.\"],\n      },\n    };\n  }\n\n  return { success: true };\n}\n\n// ============================================\n// SHARE CLASS ACTIONS\n// ============================================\n\nconst shareClassSchema = z.object({\n  name: z.string().min(1, \"Share class name is required\"),\n  type: z.enum([\"COMMON\", \"PREFERRED\"]),\n  authorizedShares: z.coerce.number().int().positive(\"Authorized shares must be positive\"),\n  pricePerShare: z.coerce.number().positive(\"Price per share must be positive\"),\n  conversionRatio: z.coerce.number().positive().optional(),\n  liquidationPreference: z.coerce.number().optional(),\n  liquidationMultiple: z.coerce.number().optional(),\n  participatingPreferred: z.coerce.boolean().optional(),\n  seniority: z.coerce.number().int().optional(),\n});\n\nexport type ShareClassFormState = {\n  errors?: {\n    name?: string[];\n    type?: string[];\n    authorizedShares?: string[];\n    pricePerShare?: string[];\n    _form?: string[];\n  };\n  success?: boolean;\n};\n\nexport async function createShareClass(\n  prevState: ShareClassFormState,\n  formData: FormData\n): Promise<ShareClassFormState> {\n  const companyId = formData.get(\"companyId\") as string;\n  \n  const validatedFields = shareClassSchema.safeParse({\n    name: formData.get(\"name\"),\n    type: formData.get(\"type\"),\n    authorizedShares: formData.get(\"authorizedShares\"),\n    pricePerShare: formData.get(\"pricePerShare\"),\n    conversionRatio: formData.get(\"conversionRatio\") || undefined,\n    liquidationPreference: formData.get(\"liquidationPreference\") || undefined,\n    liquidationMultiple: formData.get(\"liquidationMultiple\") || undefined,\n    participatingPreferred: formData.get(\"participatingPreferred\") === \"true\",\n    seniority: formData.get(\"seniority\") || undefined,\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n    };\n  }\n\n  try {\n    await prisma.shareClass.create({\n      data: {\n        companyId,\n        name: validatedFields.data.name,\n        type: validatedFields.data.type,\n        authorizedShares: validatedFields.data.authorizedShares,\n        pricePerShare: validatedFields.data.pricePerShare,\n        conversionRatio: validatedFields.data.conversionRatio ?? 1,\n        liquidationPreference: validatedFields.data.liquidationPreference,\n        liquidationMultiple: validatedFields.data.liquidationMultiple,\n        participatingPreferred: validatedFields.data.participatingPreferred ?? false,\n        seniority: validatedFields.data.seniority ?? 0,\n      },\n    });\n\n    revalidatePath(\"/settings\");\n  } catch (error) {\n    console.error(\"Error creating share class:\", error);\n    return {\n      errors: {\n        _form: [\"Failed to create share class. Please try again.\"],\n      },\n    };\n  }\n\n  return { success: true };\n}\n\nexport async function deleteShareClass(id: string): Promise<{ error?: string }> {\n  try {\n    // Check if there are any certificates using this share class\n    const certificateCount = await prisma.shareCertificate.count({\n      where: { shareClassId: id },\n    });\n\n    if (certificateCount > 0) {\n      return {\n        error: `Cannot delete share class. It has ${certificateCount} certificate(s) associated with it.`,\n      };\n    }\n\n    await prisma.shareClass.delete({\n      where: { id },\n    });\n\n    revalidatePath(\"/settings\");\n    return {};\n  } catch (error) {\n    console.error(\"Error deleting share class:\", error);\n    return { error: \"Failed to delete share class.\" };\n  }\n}\n\n// ============================================\n// EQUITY PLAN ACTIONS\n// ============================================\n\nconst equityPlanSchema = z.object({\n  name: z.string().min(1, \"Plan name is required\"),\n  totalPoolSize: z.coerce.number().int().positive(\"Pool size must be positive\"),\n  boardApprovalDate: z.string().min(1, \"Board approval date is required\"),\n  expirationDate: z.string().min(1, \"Expiration date is required\"),\n});\n\nexport type EquityPlanFormState = {\n  errors?: {\n    name?: string[];\n    totalPoolSize?: string[];\n    boardApprovalDate?: string[];\n    expirationDate?: string[];\n    _form?: string[];\n  };\n  success?: boolean;\n};\n\nexport async function createEquityPlan(\n  prevState: EquityPlanFormState,\n  formData: FormData\n): Promise<EquityPlanFormState> {\n  const companyId = formData.get(\"companyId\") as string;\n  \n  const validatedFields = equityPlanSchema.safeParse({\n    name: formData.get(\"name\"),\n    totalPoolSize: formData.get(\"totalPoolSize\"),\n    boardApprovalDate: formData.get(\"boardApprovalDate\"),\n    expirationDate: formData.get(\"expirationDate\"),\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n    };\n  }\n\n  try {\n    await prisma.equityPlan.create({\n      data: {\n        companyId,\n        name: validatedFields.data.name,\n        totalPoolSize: validatedFields.data.totalPoolSize,\n        availableShares: validatedFields.data.totalPoolSize, // Initially all shares are available\n        boardApprovalDate: new Date(validatedFields.data.boardApprovalDate),\n        expirationDate: new Date(validatedFields.data.expirationDate),\n      },\n    });\n\n    revalidatePath(\"/settings\");\n  } catch (error) {\n    console.error(\"Error creating equity plan:\", error);\n    return {\n      errors: {\n        _form: [\"Failed to create equity plan. Please try again.\"],\n      },\n    };\n  }\n\n  return { success: true };\n}\n\nexport async function deleteEquityPlan(id: string): Promise<{ error?: string }> {\n  try {\n    // Check if there are any grants using this plan\n    const grantCount = await prisma.optionGrant.count({\n      where: { equityPlanId: id },\n    });\n\n    if (grantCount > 0) {\n      return {\n        error: `Cannot delete equity plan. It has ${grantCount} grant(s) associated with it.`,\n      };\n    }\n\n    await prisma.equityPlan.delete({\n      where: { id },\n    });\n\n    revalidatePath(\"/settings\");\n    return {};\n  } catch (error) {\n    console.error(\"Error deleting equity plan:\", error);\n    return { error: \"Failed to delete equity plan.\" };\n  }\n}\n"],"names":[],"mappings":";;;;;;;MAmKsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,oDAAA"}},
    {"offset": {"line": 889, "column": 0}, "map": {"version":3,"sources":["file:///Users/jarvis/Desktop/BoardFinance/src/app/%28admin%29/settings/actions.ts"],"sourcesContent":["\"use server\";\n\nimport { prisma } from \"@/lib/prisma\";\nimport { revalidatePath } from \"next/cache\";\nimport { redirect } from \"next/navigation\";\nimport { z } from \"zod\";\n\n// ============================================\n// COMPANY ACTIONS\n// ============================================\n\nconst companySchema = z.object({\n  name: z.string().min(1, \"Company name is required\"),\n  legalName: z.string().optional(),\n  incorporationDate: z.string().min(1, \"Incorporation date is required\"),\n  incorporationState: z.string().min(1, \"Incorporation state is required\"),\n  authorizedShares: z.coerce.number().int().positive(\"Authorized shares must be positive\"),\n  parValue: z.coerce.number().positive(\"Par value must be positive\"),\n});\n\nexport type CompanyFormState = {\n  errors?: {\n    name?: string[];\n    legalName?: string[];\n    incorporationDate?: string[];\n    incorporationState?: string[];\n    authorizedShares?: string[];\n    parValue?: string[];\n    _form?: string[];\n  };\n  success?: boolean;\n};\n\nexport async function createCompany(\n  prevState: CompanyFormState,\n  formData: FormData\n): Promise<CompanyFormState> {\n  const validatedFields = companySchema.safeParse({\n    name: formData.get(\"name\"),\n    legalName: formData.get(\"legalName\") || undefined,\n    incorporationDate: formData.get(\"incorporationDate\"),\n    incorporationState: formData.get(\"incorporationState\"),\n    authorizedShares: formData.get(\"authorizedShares\"),\n    parValue: formData.get(\"parValue\"),\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n    };\n  }\n\n  try {\n    // Check if company already exists\n    const existing = await prisma.company.findFirst();\n    if (existing) {\n      return {\n        errors: {\n          _form: [\"A company already exists. Please edit the existing company.\"],\n        },\n      };\n    }\n\n    await prisma.company.create({\n      data: {\n        name: validatedFields.data.name,\n        legalName: validatedFields.data.legalName || null,\n        incorporationDate: new Date(validatedFields.data.incorporationDate),\n        incorporationState: validatedFields.data.incorporationState,\n        authorizedShares: validatedFields.data.authorizedShares,\n        parValue: validatedFields.data.parValue,\n      },\n    });\n\n    revalidatePath(\"/settings\");\n    revalidatePath(\"/\");\n  } catch (error) {\n    console.error(\"Error creating company:\", error);\n    return {\n      errors: {\n        _form: [\"Failed to create company. Please try again.\"],\n      },\n    };\n  }\n\n  return { success: true };\n}\n\nexport async function updateCompany(\n  prevState: CompanyFormState,\n  formData: FormData\n): Promise<CompanyFormState> {\n  const id = formData.get(\"id\") as string;\n  \n  const validatedFields = companySchema.safeParse({\n    name: formData.get(\"name\"),\n    legalName: formData.get(\"legalName\") || undefined,\n    incorporationDate: formData.get(\"incorporationDate\"),\n    incorporationState: formData.get(\"incorporationState\"),\n    authorizedShares: formData.get(\"authorizedShares\"),\n    parValue: formData.get(\"parValue\"),\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n    };\n  }\n\n  try {\n    await prisma.company.update({\n      where: { id },\n      data: {\n        name: validatedFields.data.name,\n        legalName: validatedFields.data.legalName || null,\n        incorporationDate: new Date(validatedFields.data.incorporationDate),\n        incorporationState: validatedFields.data.incorporationState,\n        authorizedShares: validatedFields.data.authorizedShares,\n        parValue: validatedFields.data.parValue,\n      },\n    });\n\n    revalidatePath(\"/settings\");\n    revalidatePath(\"/\");\n  } catch (error) {\n    console.error(\"Error updating company:\", error);\n    return {\n      errors: {\n        _form: [\"Failed to update company. Please try again.\"],\n      },\n    };\n  }\n\n  return { success: true };\n}\n\n// ============================================\n// SHARE CLASS ACTIONS\n// ============================================\n\nconst shareClassSchema = z.object({\n  name: z.string().min(1, \"Share class name is required\"),\n  type: z.enum([\"COMMON\", \"PREFERRED\"]),\n  authorizedShares: z.coerce.number().int().positive(\"Authorized shares must be positive\"),\n  pricePerShare: z.coerce.number().positive(\"Price per share must be positive\"),\n  conversionRatio: z.coerce.number().positive().optional(),\n  liquidationPreference: z.coerce.number().optional(),\n  liquidationMultiple: z.coerce.number().optional(),\n  participatingPreferred: z.coerce.boolean().optional(),\n  seniority: z.coerce.number().int().optional(),\n});\n\nexport type ShareClassFormState = {\n  errors?: {\n    name?: string[];\n    type?: string[];\n    authorizedShares?: string[];\n    pricePerShare?: string[];\n    _form?: string[];\n  };\n  success?: boolean;\n};\n\nexport async function createShareClass(\n  prevState: ShareClassFormState,\n  formData: FormData\n): Promise<ShareClassFormState> {\n  const companyId = formData.get(\"companyId\") as string;\n  \n  const validatedFields = shareClassSchema.safeParse({\n    name: formData.get(\"name\"),\n    type: formData.get(\"type\"),\n    authorizedShares: formData.get(\"authorizedShares\"),\n    pricePerShare: formData.get(\"pricePerShare\"),\n    conversionRatio: formData.get(\"conversionRatio\") || undefined,\n    liquidationPreference: formData.get(\"liquidationPreference\") || undefined,\n    liquidationMultiple: formData.get(\"liquidationMultiple\") || undefined,\n    participatingPreferred: formData.get(\"participatingPreferred\") === \"true\",\n    seniority: formData.get(\"seniority\") || undefined,\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n    };\n  }\n\n  try {\n    await prisma.shareClass.create({\n      data: {\n        companyId,\n        name: validatedFields.data.name,\n        type: validatedFields.data.type,\n        authorizedShares: validatedFields.data.authorizedShares,\n        pricePerShare: validatedFields.data.pricePerShare,\n        conversionRatio: validatedFields.data.conversionRatio ?? 1,\n        liquidationPreference: validatedFields.data.liquidationPreference,\n        liquidationMultiple: validatedFields.data.liquidationMultiple,\n        participatingPreferred: validatedFields.data.participatingPreferred ?? false,\n        seniority: validatedFields.data.seniority ?? 0,\n      },\n    });\n\n    revalidatePath(\"/settings\");\n  } catch (error) {\n    console.error(\"Error creating share class:\", error);\n    return {\n      errors: {\n        _form: [\"Failed to create share class. Please try again.\"],\n      },\n    };\n  }\n\n  return { success: true };\n}\n\nexport async function deleteShareClass(id: string): Promise<{ error?: string }> {\n  try {\n    // Check if there are any certificates using this share class\n    const certificateCount = await prisma.shareCertificate.count({\n      where: { shareClassId: id },\n    });\n\n    if (certificateCount > 0) {\n      return {\n        error: `Cannot delete share class. It has ${certificateCount} certificate(s) associated with it.`,\n      };\n    }\n\n    await prisma.shareClass.delete({\n      where: { id },\n    });\n\n    revalidatePath(\"/settings\");\n    return {};\n  } catch (error) {\n    console.error(\"Error deleting share class:\", error);\n    return { error: \"Failed to delete share class.\" };\n  }\n}\n\n// ============================================\n// EQUITY PLAN ACTIONS\n// ============================================\n\nconst equityPlanSchema = z.object({\n  name: z.string().min(1, \"Plan name is required\"),\n  totalPoolSize: z.coerce.number().int().positive(\"Pool size must be positive\"),\n  boardApprovalDate: z.string().min(1, \"Board approval date is required\"),\n  expirationDate: z.string().min(1, \"Expiration date is required\"),\n});\n\nexport type EquityPlanFormState = {\n  errors?: {\n    name?: string[];\n    totalPoolSize?: string[];\n    boardApprovalDate?: string[];\n    expirationDate?: string[];\n    _form?: string[];\n  };\n  success?: boolean;\n};\n\nexport async function createEquityPlan(\n  prevState: EquityPlanFormState,\n  formData: FormData\n): Promise<EquityPlanFormState> {\n  const companyId = formData.get(\"companyId\") as string;\n  \n  const validatedFields = equityPlanSchema.safeParse({\n    name: formData.get(\"name\"),\n    totalPoolSize: formData.get(\"totalPoolSize\"),\n    boardApprovalDate: formData.get(\"boardApprovalDate\"),\n    expirationDate: formData.get(\"expirationDate\"),\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n    };\n  }\n\n  try {\n    await prisma.equityPlan.create({\n      data: {\n        companyId,\n        name: validatedFields.data.name,\n        totalPoolSize: validatedFields.data.totalPoolSize,\n        availableShares: validatedFields.data.totalPoolSize, // Initially all shares are available\n        boardApprovalDate: new Date(validatedFields.data.boardApprovalDate),\n        expirationDate: new Date(validatedFields.data.expirationDate),\n      },\n    });\n\n    revalidatePath(\"/settings\");\n  } catch (error) {\n    console.error(\"Error creating equity plan:\", error);\n    return {\n      errors: {\n        _form: [\"Failed to create equity plan. Please try again.\"],\n      },\n    };\n  }\n\n  return { success: true };\n}\n\nexport async function deleteEquityPlan(id: string): Promise<{ error?: string }> {\n  try {\n    // Check if there are any grants using this plan\n    const grantCount = await prisma.optionGrant.count({\n      where: { equityPlanId: id },\n    });\n\n    if (grantCount > 0) {\n      return {\n        error: `Cannot delete equity plan. It has ${grantCount} grant(s) associated with it.`,\n      };\n    }\n\n    await prisma.equityPlan.delete({\n      where: { id },\n    });\n\n    revalidatePath(\"/settings\");\n    return {};\n  } catch (error) {\n    console.error(\"Error deleting equity plan:\", error);\n    return { error: \"Failed to delete equity plan.\" };\n  }\n}\n"],"names":[],"mappings":";;;;;;;MAwNsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,oDAAA"}},
    {"offset": {"line": 903, "column": 0}, "map": {"version":3,"sources":["file:///Users/jarvis/Desktop/BoardFinance/src/app/%28admin%29/settings/share-class-list.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useActionState, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { createShareClass, deleteShareClass, type ShareClassFormState } from \"./actions\";\nimport { formatNumber, formatCurrency } from \"@/lib/utils\";\nimport { Plus, Trash2 } from \"lucide-react\";\nimport { toast } from \"sonner\";\n\ninterface ShareClass {\n  id: string;\n  name: string;\n  type: string;\n  authorizedShares: number;\n  pricePerShare: number;\n  conversionRatio: number;\n}\n\ninterface ShareClassListProps {\n  shareClasses: ShareClass[];\n  companyId: string;\n}\n\nconst initialState: ShareClassFormState = {};\n\nexport function ShareClassList({ shareClasses, companyId }: ShareClassListProps) {\n  const [open, setOpen] = useState(false);\n  const [state, formAction, isPending] = useActionState(createShareClass, initialState);\n\n  useEffect(() => {\n    if (state.success) {\n      toast.success(\"Share class created successfully\");\n      setOpen(false);\n    }\n    if (state.errors?._form) {\n      toast.error(state.errors._form[0]);\n    }\n  }, [state]);\n\n  const handleDelete = async (id: string, name: string) => {\n    if (!confirm(`Are you sure you want to delete \"${name}\"?`)) return;\n    \n    const result = await deleteShareClass(id);\n    if (result.error) {\n      toast.error(result.error);\n    } else {\n      toast.success(\"Share class deleted\");\n    }\n  };\n\n  return (\n    <Card>\n      <CardContent className=\"pt-6\">\n        {shareClasses.length === 0 ? (\n          <div className=\"text-center py-8\">\n            <p className=\"text-muted-foreground mb-4\">\n              No share classes defined yet. Add at least one share class to start issuing equity.\n            </p>\n          </div>\n        ) : (\n          <div className=\"space-y-3 mb-6\">\n            {shareClasses.map((sc) => (\n              <div\n                key={sc.id}\n                className=\"flex items-center justify-between p-4 border rounded-lg\"\n              >\n                <div className=\"flex items-center gap-4\">\n                  <div>\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"font-medium\">{sc.name}</span>\n                      <Badge variant={sc.type === \"COMMON\" ? \"default\" : \"secondary\"}>\n                        {sc.type}\n                      </Badge>\n                    </div>\n                    <div className=\"text-sm text-muted-foreground\">\n                      {formatNumber(sc.authorizedShares)} authorized  {formatCurrency(sc.pricePerShare)}/share\n                    </div>\n                  </div>\n                </div>\n                <Button\n                  variant=\"ghost\"\n                  size=\"icon\"\n                  onClick={() => handleDelete(sc.id, sc.name)}\n                >\n                  <Trash2 className=\"h-4 w-4 text-muted-foreground hover:text-red-500\" />\n                </Button>\n              </div>\n            ))}\n          </div>\n        )}\n\n        <Dialog open={open} onOpenChange={setOpen}>\n          <DialogTrigger asChild>\n            <Button variant=\"outline\" className=\"w-full\">\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Add Share Class\n            </Button>\n          </DialogTrigger>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Add Share Class</DialogTitle>\n            </DialogHeader>\n            <form action={formAction} className=\"space-y-4\">\n              <input type=\"hidden\" name=\"companyId\" value={companyId} />\n              \n              <div className=\"space-y-2\">\n                <Label htmlFor=\"sc-name\">Name *</Label>\n                <Input\n                  id=\"sc-name\"\n                  name=\"name\"\n                  placeholder=\"Common Stock\"\n                  required\n                />\n                {state.errors?.name && (\n                  <p className=\"text-sm text-red-500\">{state.errors.name[0]}</p>\n                )}\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"sc-type\">Type *</Label>\n                <select\n                  id=\"sc-type\"\n                  name=\"type\"\n                  className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\n                  required\n                >\n                  <option value=\"COMMON\">Common</option>\n                  <option value=\"PREFERRED\">Preferred</option>\n                </select>\n                {state.errors?.type && (\n                  <p className=\"text-sm text-red-500\">{state.errors.type[0]}</p>\n                )}\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"sc-authorized\">Authorized Shares *</Label>\n                  <Input\n                    id=\"sc-authorized\"\n                    name=\"authorizedShares\"\n                    type=\"number\"\n                    defaultValue={10000000}\n                    min={1}\n                    required\n                  />\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"sc-price\">Price per Share *</Label>\n                  <Input\n                    id=\"sc-price\"\n                    name=\"pricePerShare\"\n                    type=\"number\"\n                    step=\"0.0001\"\n                    defaultValue={0.0001}\n                    min={0.0001}\n                    required\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex justify-end gap-2\">\n                <Button type=\"button\" variant=\"outline\" onClick={() => setOpen(false)}>\n                  Cancel\n                </Button>\n                <Button type=\"submit\" disabled={isPending}>\n                  {isPending ? \"Creating...\" : \"Create Share Class\"}\n                </Button>\n              </div>\n            </form>\n          </DialogContent>\n        </Dialog>\n      </CardContent>\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1336, "column": 0}, "map": {"version":3,"sources":["file:///Users/jarvis/Desktop/BoardFinance/src/app/%28admin%29/settings/actions.ts"],"sourcesContent":["\"use server\";\n\nimport { prisma } from \"@/lib/prisma\";\nimport { revalidatePath } from \"next/cache\";\nimport { redirect } from \"next/navigation\";\nimport { z } from \"zod\";\n\n// ============================================\n// COMPANY ACTIONS\n// ============================================\n\nconst companySchema = z.object({\n  name: z.string().min(1, \"Company name is required\"),\n  legalName: z.string().optional(),\n  incorporationDate: z.string().min(1, \"Incorporation date is required\"),\n  incorporationState: z.string().min(1, \"Incorporation state is required\"),\n  authorizedShares: z.coerce.number().int().positive(\"Authorized shares must be positive\"),\n  parValue: z.coerce.number().positive(\"Par value must be positive\"),\n});\n\nexport type CompanyFormState = {\n  errors?: {\n    name?: string[];\n    legalName?: string[];\n    incorporationDate?: string[];\n    incorporationState?: string[];\n    authorizedShares?: string[];\n    parValue?: string[];\n    _form?: string[];\n  };\n  success?: boolean;\n};\n\nexport async function createCompany(\n  prevState: CompanyFormState,\n  formData: FormData\n): Promise<CompanyFormState> {\n  const validatedFields = companySchema.safeParse({\n    name: formData.get(\"name\"),\n    legalName: formData.get(\"legalName\") || undefined,\n    incorporationDate: formData.get(\"incorporationDate\"),\n    incorporationState: formData.get(\"incorporationState\"),\n    authorizedShares: formData.get(\"authorizedShares\"),\n    parValue: formData.get(\"parValue\"),\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n    };\n  }\n\n  try {\n    // Check if company already exists\n    const existing = await prisma.company.findFirst();\n    if (existing) {\n      return {\n        errors: {\n          _form: [\"A company already exists. Please edit the existing company.\"],\n        },\n      };\n    }\n\n    await prisma.company.create({\n      data: {\n        name: validatedFields.data.name,\n        legalName: validatedFields.data.legalName || null,\n        incorporationDate: new Date(validatedFields.data.incorporationDate),\n        incorporationState: validatedFields.data.incorporationState,\n        authorizedShares: validatedFields.data.authorizedShares,\n        parValue: validatedFields.data.parValue,\n      },\n    });\n\n    revalidatePath(\"/settings\");\n    revalidatePath(\"/\");\n  } catch (error) {\n    console.error(\"Error creating company:\", error);\n    return {\n      errors: {\n        _form: [\"Failed to create company. Please try again.\"],\n      },\n    };\n  }\n\n  return { success: true };\n}\n\nexport async function updateCompany(\n  prevState: CompanyFormState,\n  formData: FormData\n): Promise<CompanyFormState> {\n  const id = formData.get(\"id\") as string;\n  \n  const validatedFields = companySchema.safeParse({\n    name: formData.get(\"name\"),\n    legalName: formData.get(\"legalName\") || undefined,\n    incorporationDate: formData.get(\"incorporationDate\"),\n    incorporationState: formData.get(\"incorporationState\"),\n    authorizedShares: formData.get(\"authorizedShares\"),\n    parValue: formData.get(\"parValue\"),\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n    };\n  }\n\n  try {\n    await prisma.company.update({\n      where: { id },\n      data: {\n        name: validatedFields.data.name,\n        legalName: validatedFields.data.legalName || null,\n        incorporationDate: new Date(validatedFields.data.incorporationDate),\n        incorporationState: validatedFields.data.incorporationState,\n        authorizedShares: validatedFields.data.authorizedShares,\n        parValue: validatedFields.data.parValue,\n      },\n    });\n\n    revalidatePath(\"/settings\");\n    revalidatePath(\"/\");\n  } catch (error) {\n    console.error(\"Error updating company:\", error);\n    return {\n      errors: {\n        _form: [\"Failed to update company. Please try again.\"],\n      },\n    };\n  }\n\n  return { success: true };\n}\n\n// ============================================\n// SHARE CLASS ACTIONS\n// ============================================\n\nconst shareClassSchema = z.object({\n  name: z.string().min(1, \"Share class name is required\"),\n  type: z.enum([\"COMMON\", \"PREFERRED\"]),\n  authorizedShares: z.coerce.number().int().positive(\"Authorized shares must be positive\"),\n  pricePerShare: z.coerce.number().positive(\"Price per share must be positive\"),\n  conversionRatio: z.coerce.number().positive().optional(),\n  liquidationPreference: z.coerce.number().optional(),\n  liquidationMultiple: z.coerce.number().optional(),\n  participatingPreferred: z.coerce.boolean().optional(),\n  seniority: z.coerce.number().int().optional(),\n});\n\nexport type ShareClassFormState = {\n  errors?: {\n    name?: string[];\n    type?: string[];\n    authorizedShares?: string[];\n    pricePerShare?: string[];\n    _form?: string[];\n  };\n  success?: boolean;\n};\n\nexport async function createShareClass(\n  prevState: ShareClassFormState,\n  formData: FormData\n): Promise<ShareClassFormState> {\n  const companyId = formData.get(\"companyId\") as string;\n  \n  const validatedFields = shareClassSchema.safeParse({\n    name: formData.get(\"name\"),\n    type: formData.get(\"type\"),\n    authorizedShares: formData.get(\"authorizedShares\"),\n    pricePerShare: formData.get(\"pricePerShare\"),\n    conversionRatio: formData.get(\"conversionRatio\") || undefined,\n    liquidationPreference: formData.get(\"liquidationPreference\") || undefined,\n    liquidationMultiple: formData.get(\"liquidationMultiple\") || undefined,\n    participatingPreferred: formData.get(\"participatingPreferred\") === \"true\",\n    seniority: formData.get(\"seniority\") || undefined,\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n    };\n  }\n\n  try {\n    await prisma.shareClass.create({\n      data: {\n        companyId,\n        name: validatedFields.data.name,\n        type: validatedFields.data.type,\n        authorizedShares: validatedFields.data.authorizedShares,\n        pricePerShare: validatedFields.data.pricePerShare,\n        conversionRatio: validatedFields.data.conversionRatio ?? 1,\n        liquidationPreference: validatedFields.data.liquidationPreference,\n        liquidationMultiple: validatedFields.data.liquidationMultiple,\n        participatingPreferred: validatedFields.data.participatingPreferred ?? false,\n        seniority: validatedFields.data.seniority ?? 0,\n      },\n    });\n\n    revalidatePath(\"/settings\");\n  } catch (error) {\n    console.error(\"Error creating share class:\", error);\n    return {\n      errors: {\n        _form: [\"Failed to create share class. Please try again.\"],\n      },\n    };\n  }\n\n  return { success: true };\n}\n\nexport async function deleteShareClass(id: string): Promise<{ error?: string }> {\n  try {\n    // Check if there are any certificates using this share class\n    const certificateCount = await prisma.shareCertificate.count({\n      where: { shareClassId: id },\n    });\n\n    if (certificateCount > 0) {\n      return {\n        error: `Cannot delete share class. It has ${certificateCount} certificate(s) associated with it.`,\n      };\n    }\n\n    await prisma.shareClass.delete({\n      where: { id },\n    });\n\n    revalidatePath(\"/settings\");\n    return {};\n  } catch (error) {\n    console.error(\"Error deleting share class:\", error);\n    return { error: \"Failed to delete share class.\" };\n  }\n}\n\n// ============================================\n// EQUITY PLAN ACTIONS\n// ============================================\n\nconst equityPlanSchema = z.object({\n  name: z.string().min(1, \"Plan name is required\"),\n  totalPoolSize: z.coerce.number().int().positive(\"Pool size must be positive\"),\n  boardApprovalDate: z.string().min(1, \"Board approval date is required\"),\n  expirationDate: z.string().min(1, \"Expiration date is required\"),\n});\n\nexport type EquityPlanFormState = {\n  errors?: {\n    name?: string[];\n    totalPoolSize?: string[];\n    boardApprovalDate?: string[];\n    expirationDate?: string[];\n    _form?: string[];\n  };\n  success?: boolean;\n};\n\nexport async function createEquityPlan(\n  prevState: EquityPlanFormState,\n  formData: FormData\n): Promise<EquityPlanFormState> {\n  const companyId = formData.get(\"companyId\") as string;\n  \n  const validatedFields = equityPlanSchema.safeParse({\n    name: formData.get(\"name\"),\n    totalPoolSize: formData.get(\"totalPoolSize\"),\n    boardApprovalDate: formData.get(\"boardApprovalDate\"),\n    expirationDate: formData.get(\"expirationDate\"),\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n    };\n  }\n\n  try {\n    await prisma.equityPlan.create({\n      data: {\n        companyId,\n        name: validatedFields.data.name,\n        totalPoolSize: validatedFields.data.totalPoolSize,\n        availableShares: validatedFields.data.totalPoolSize, // Initially all shares are available\n        boardApprovalDate: new Date(validatedFields.data.boardApprovalDate),\n        expirationDate: new Date(validatedFields.data.expirationDate),\n      },\n    });\n\n    revalidatePath(\"/settings\");\n  } catch (error) {\n    console.error(\"Error creating equity plan:\", error);\n    return {\n      errors: {\n        _form: [\"Failed to create equity plan. Please try again.\"],\n      },\n    };\n  }\n\n  return { success: true };\n}\n\nexport async function deleteEquityPlan(id: string): Promise<{ error?: string }> {\n  try {\n    // Check if there are any grants using this plan\n    const grantCount = await prisma.optionGrant.count({\n      where: { equityPlanId: id },\n    });\n\n    if (grantCount > 0) {\n      return {\n        error: `Cannot delete equity plan. It has ${grantCount} grant(s) associated with it.`,\n      };\n    }\n\n    await prisma.equityPlan.delete({\n      where: { id },\n    });\n\n    revalidatePath(\"/settings\");\n    return {};\n  } catch (error) {\n    console.error(\"Error deleting equity plan:\", error);\n    return { error: \"Failed to delete equity plan.\" };\n  }\n}\n"],"names":[],"mappings":";;;;;;;MAuQsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,oDAAA"}},
    {"offset": {"line": 1350, "column": 0}, "map": {"version":3,"sources":["file:///Users/jarvis/Desktop/BoardFinance/src/app/%28admin%29/settings/actions.ts"],"sourcesContent":["\"use server\";\n\nimport { prisma } from \"@/lib/prisma\";\nimport { revalidatePath } from \"next/cache\";\nimport { redirect } from \"next/navigation\";\nimport { z } from \"zod\";\n\n// ============================================\n// COMPANY ACTIONS\n// ============================================\n\nconst companySchema = z.object({\n  name: z.string().min(1, \"Company name is required\"),\n  legalName: z.string().optional(),\n  incorporationDate: z.string().min(1, \"Incorporation date is required\"),\n  incorporationState: z.string().min(1, \"Incorporation state is required\"),\n  authorizedShares: z.coerce.number().int().positive(\"Authorized shares must be positive\"),\n  parValue: z.coerce.number().positive(\"Par value must be positive\"),\n});\n\nexport type CompanyFormState = {\n  errors?: {\n    name?: string[];\n    legalName?: string[];\n    incorporationDate?: string[];\n    incorporationState?: string[];\n    authorizedShares?: string[];\n    parValue?: string[];\n    _form?: string[];\n  };\n  success?: boolean;\n};\n\nexport async function createCompany(\n  prevState: CompanyFormState,\n  formData: FormData\n): Promise<CompanyFormState> {\n  const validatedFields = companySchema.safeParse({\n    name: formData.get(\"name\"),\n    legalName: formData.get(\"legalName\") || undefined,\n    incorporationDate: formData.get(\"incorporationDate\"),\n    incorporationState: formData.get(\"incorporationState\"),\n    authorizedShares: formData.get(\"authorizedShares\"),\n    parValue: formData.get(\"parValue\"),\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n    };\n  }\n\n  try {\n    // Check if company already exists\n    const existing = await prisma.company.findFirst();\n    if (existing) {\n      return {\n        errors: {\n          _form: [\"A company already exists. Please edit the existing company.\"],\n        },\n      };\n    }\n\n    await prisma.company.create({\n      data: {\n        name: validatedFields.data.name,\n        legalName: validatedFields.data.legalName || null,\n        incorporationDate: new Date(validatedFields.data.incorporationDate),\n        incorporationState: validatedFields.data.incorporationState,\n        authorizedShares: validatedFields.data.authorizedShares,\n        parValue: validatedFields.data.parValue,\n      },\n    });\n\n    revalidatePath(\"/settings\");\n    revalidatePath(\"/\");\n  } catch (error) {\n    console.error(\"Error creating company:\", error);\n    return {\n      errors: {\n        _form: [\"Failed to create company. Please try again.\"],\n      },\n    };\n  }\n\n  return { success: true };\n}\n\nexport async function updateCompany(\n  prevState: CompanyFormState,\n  formData: FormData\n): Promise<CompanyFormState> {\n  const id = formData.get(\"id\") as string;\n  \n  const validatedFields = companySchema.safeParse({\n    name: formData.get(\"name\"),\n    legalName: formData.get(\"legalName\") || undefined,\n    incorporationDate: formData.get(\"incorporationDate\"),\n    incorporationState: formData.get(\"incorporationState\"),\n    authorizedShares: formData.get(\"authorizedShares\"),\n    parValue: formData.get(\"parValue\"),\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n    };\n  }\n\n  try {\n    await prisma.company.update({\n      where: { id },\n      data: {\n        name: validatedFields.data.name,\n        legalName: validatedFields.data.legalName || null,\n        incorporationDate: new Date(validatedFields.data.incorporationDate),\n        incorporationState: validatedFields.data.incorporationState,\n        authorizedShares: validatedFields.data.authorizedShares,\n        parValue: validatedFields.data.parValue,\n      },\n    });\n\n    revalidatePath(\"/settings\");\n    revalidatePath(\"/\");\n  } catch (error) {\n    console.error(\"Error updating company:\", error);\n    return {\n      errors: {\n        _form: [\"Failed to update company. Please try again.\"],\n      },\n    };\n  }\n\n  return { success: true };\n}\n\n// ============================================\n// SHARE CLASS ACTIONS\n// ============================================\n\nconst shareClassSchema = z.object({\n  name: z.string().min(1, \"Share class name is required\"),\n  type: z.enum([\"COMMON\", \"PREFERRED\"]),\n  authorizedShares: z.coerce.number().int().positive(\"Authorized shares must be positive\"),\n  pricePerShare: z.coerce.number().positive(\"Price per share must be positive\"),\n  conversionRatio: z.coerce.number().positive().optional(),\n  liquidationPreference: z.coerce.number().optional(),\n  liquidationMultiple: z.coerce.number().optional(),\n  participatingPreferred: z.coerce.boolean().optional(),\n  seniority: z.coerce.number().int().optional(),\n});\n\nexport type ShareClassFormState = {\n  errors?: {\n    name?: string[];\n    type?: string[];\n    authorizedShares?: string[];\n    pricePerShare?: string[];\n    _form?: string[];\n  };\n  success?: boolean;\n};\n\nexport async function createShareClass(\n  prevState: ShareClassFormState,\n  formData: FormData\n): Promise<ShareClassFormState> {\n  const companyId = formData.get(\"companyId\") as string;\n  \n  const validatedFields = shareClassSchema.safeParse({\n    name: formData.get(\"name\"),\n    type: formData.get(\"type\"),\n    authorizedShares: formData.get(\"authorizedShares\"),\n    pricePerShare: formData.get(\"pricePerShare\"),\n    conversionRatio: formData.get(\"conversionRatio\") || undefined,\n    liquidationPreference: formData.get(\"liquidationPreference\") || undefined,\n    liquidationMultiple: formData.get(\"liquidationMultiple\") || undefined,\n    participatingPreferred: formData.get(\"participatingPreferred\") === \"true\",\n    seniority: formData.get(\"seniority\") || undefined,\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n    };\n  }\n\n  try {\n    await prisma.shareClass.create({\n      data: {\n        companyId,\n        name: validatedFields.data.name,\n        type: validatedFields.data.type,\n        authorizedShares: validatedFields.data.authorizedShares,\n        pricePerShare: validatedFields.data.pricePerShare,\n        conversionRatio: validatedFields.data.conversionRatio ?? 1,\n        liquidationPreference: validatedFields.data.liquidationPreference,\n        liquidationMultiple: validatedFields.data.liquidationMultiple,\n        participatingPreferred: validatedFields.data.participatingPreferred ?? false,\n        seniority: validatedFields.data.seniority ?? 0,\n      },\n    });\n\n    revalidatePath(\"/settings\");\n  } catch (error) {\n    console.error(\"Error creating share class:\", error);\n    return {\n      errors: {\n        _form: [\"Failed to create share class. Please try again.\"],\n      },\n    };\n  }\n\n  return { success: true };\n}\n\nexport async function deleteShareClass(id: string): Promise<{ error?: string }> {\n  try {\n    // Check if there are any certificates using this share class\n    const certificateCount = await prisma.shareCertificate.count({\n      where: { shareClassId: id },\n    });\n\n    if (certificateCount > 0) {\n      return {\n        error: `Cannot delete share class. It has ${certificateCount} certificate(s) associated with it.`,\n      };\n    }\n\n    await prisma.shareClass.delete({\n      where: { id },\n    });\n\n    revalidatePath(\"/settings\");\n    return {};\n  } catch (error) {\n    console.error(\"Error deleting share class:\", error);\n    return { error: \"Failed to delete share class.\" };\n  }\n}\n\n// ============================================\n// EQUITY PLAN ACTIONS\n// ============================================\n\nconst equityPlanSchema = z.object({\n  name: z.string().min(1, \"Plan name is required\"),\n  totalPoolSize: z.coerce.number().int().positive(\"Pool size must be positive\"),\n  boardApprovalDate: z.string().min(1, \"Board approval date is required\"),\n  expirationDate: z.string().min(1, \"Expiration date is required\"),\n});\n\nexport type EquityPlanFormState = {\n  errors?: {\n    name?: string[];\n    totalPoolSize?: string[];\n    boardApprovalDate?: string[];\n    expirationDate?: string[];\n    _form?: string[];\n  };\n  success?: boolean;\n};\n\nexport async function createEquityPlan(\n  prevState: EquityPlanFormState,\n  formData: FormData\n): Promise<EquityPlanFormState> {\n  const companyId = formData.get(\"companyId\") as string;\n  \n  const validatedFields = equityPlanSchema.safeParse({\n    name: formData.get(\"name\"),\n    totalPoolSize: formData.get(\"totalPoolSize\"),\n    boardApprovalDate: formData.get(\"boardApprovalDate\"),\n    expirationDate: formData.get(\"expirationDate\"),\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n    };\n  }\n\n  try {\n    await prisma.equityPlan.create({\n      data: {\n        companyId,\n        name: validatedFields.data.name,\n        totalPoolSize: validatedFields.data.totalPoolSize,\n        availableShares: validatedFields.data.totalPoolSize, // Initially all shares are available\n        boardApprovalDate: new Date(validatedFields.data.boardApprovalDate),\n        expirationDate: new Date(validatedFields.data.expirationDate),\n      },\n    });\n\n    revalidatePath(\"/settings\");\n  } catch (error) {\n    console.error(\"Error creating equity plan:\", error);\n    return {\n      errors: {\n        _form: [\"Failed to create equity plan. Please try again.\"],\n      },\n    };\n  }\n\n  return { success: true };\n}\n\nexport async function deleteEquityPlan(id: string): Promise<{ error?: string }> {\n  try {\n    // Check if there are any grants using this plan\n    const grantCount = await prisma.optionGrant.count({\n      where: { equityPlanId: id },\n    });\n\n    if (grantCount > 0) {\n      return {\n        error: `Cannot delete equity plan. It has ${grantCount} grant(s) associated with it.`,\n      };\n    }\n\n    await prisma.equityPlan.delete({\n      where: { id },\n    });\n\n    revalidatePath(\"/settings\");\n    return {};\n  } catch (error) {\n    console.error(\"Error deleting equity plan:\", error);\n    return { error: \"Failed to delete equity plan.\" };\n  }\n}\n"],"names":[],"mappings":";;;;;;;MAmTsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,oDAAA"}},
    {"offset": {"line": 1364, "column": 0}, "map": {"version":3,"sources":["file:///Users/jarvis/Desktop/BoardFinance/src/app/%28admin%29/settings/equity-plan-list.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useActionState, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { createEquityPlan, deleteEquityPlan, type EquityPlanFormState } from \"./actions\";\nimport { formatNumber, formatDate } from \"@/lib/utils\";\nimport { Plus, Trash2 } from \"lucide-react\";\nimport { toast } from \"sonner\";\n\ninterface EquityPlan {\n  id: string;\n  name: string;\n  totalPoolSize: number;\n  availableShares: number;\n  boardApprovalDate: string;\n  expirationDate: string;\n}\n\ninterface EquityPlanListProps {\n  equityPlans: EquityPlan[];\n  companyId: string;\n}\n\nconst initialState: EquityPlanFormState = {};\n\nexport function EquityPlanList({ equityPlans, companyId }: EquityPlanListProps) {\n  const [open, setOpen] = useState(false);\n  const [state, formAction, isPending] = useActionState(createEquityPlan, initialState);\n\n  useEffect(() => {\n    if (state.success) {\n      toast.success(\"Equity plan created successfully\");\n      setOpen(false);\n    }\n    if (state.errors?._form) {\n      toast.error(state.errors._form[0]);\n    }\n  }, [state]);\n\n  const handleDelete = async (id: string, name: string) => {\n    if (!confirm(`Are you sure you want to delete \"${name}\"?`)) return;\n    \n    const result = await deleteEquityPlan(id);\n    if (result.error) {\n      toast.error(result.error);\n    } else {\n      toast.success(\"Equity plan deleted\");\n    }\n  };\n\n  // Default expiration: 10 years from today\n  const defaultExpiration = new Date();\n  defaultExpiration.setFullYear(defaultExpiration.getFullYear() + 10);\n\n  return (\n    <Card>\n      <CardContent className=\"pt-6\">\n        {equityPlans.length === 0 ? (\n          <div className=\"text-center py-8\">\n            <p className=\"text-muted-foreground mb-4\">\n              No equity plans defined yet. Create an equity plan to start granting stock options.\n            </p>\n          </div>\n        ) : (\n          <div className=\"space-y-3 mb-6\">\n            {equityPlans.map((plan) => (\n              <div\n                key={plan.id}\n                className=\"flex items-center justify-between p-4 border rounded-lg\"\n              >\n                <div>\n                  <div className=\"font-medium\">{plan.name}</div>\n                  <div className=\"text-sm text-muted-foreground\">\n                    {formatNumber(plan.availableShares)} of {formatNumber(plan.totalPoolSize)} available\n                  </div>\n                  <div className=\"text-xs text-muted-foreground\">\n                    Expires {formatDate(plan.expirationDate)}\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-4\">\n                  <div className=\"text-right\">\n                    <div className=\"text-sm font-medium\">\n                      {((plan.availableShares / plan.totalPoolSize) * 100).toFixed(1)}%\n                    </div>\n                    <div className=\"text-xs text-muted-foreground\">available</div>\n                  </div>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    onClick={() => handleDelete(plan.id, plan.name)}\n                  >\n                    <Trash2 className=\"h-4 w-4 text-muted-foreground hover:text-red-500\" />\n                  </Button>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n\n        <Dialog open={open} onOpenChange={setOpen}>\n          <DialogTrigger asChild>\n            <Button variant=\"outline\" className=\"w-full\">\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Add Equity Plan\n            </Button>\n          </DialogTrigger>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Add Equity Plan</DialogTitle>\n            </DialogHeader>\n            <form action={formAction} className=\"space-y-4\">\n              <input type=\"hidden\" name=\"companyId\" value={companyId} />\n              \n              <div className=\"space-y-2\">\n                <Label htmlFor=\"plan-name\">Plan Name *</Label>\n                <Input\n                  id=\"plan-name\"\n                  name=\"name\"\n                  placeholder=\"2024 Equity Incentive Plan\"\n                  required\n                />\n                {state.errors?.name && (\n                  <p className=\"text-sm text-red-500\">{state.errors.name[0]}</p>\n                )}\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"plan-pool\">Total Pool Size *</Label>\n                <Input\n                  id=\"plan-pool\"\n                  name=\"totalPoolSize\"\n                  type=\"number\"\n                  defaultValue={1000000}\n                  min={1}\n                  required\n                />\n                {state.errors?.totalPoolSize && (\n                  <p className=\"text-sm text-red-500\">{state.errors.totalPoolSize[0]}</p>\n                )}\n                <p className=\"text-xs text-muted-foreground\">\n                  Total shares reserved for this option pool\n                </p>\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"plan-approval\">Board Approval Date *</Label>\n                  <Input\n                    id=\"plan-approval\"\n                    name=\"boardApprovalDate\"\n                    type=\"date\"\n                    defaultValue={new Date().toISOString().split(\"T\")[0]}\n                    required\n                  />\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"plan-expiration\">Expiration Date *</Label>\n                  <Input\n                    id=\"plan-expiration\"\n                    name=\"expirationDate\"\n                    type=\"date\"\n                    defaultValue={defaultExpiration.toISOString().split(\"T\")[0]}\n                    required\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex justify-end gap-2\">\n                <Button type=\"button\" variant=\"outline\" onClick={() => setOpen(false)}>\n                  Cancel\n                </Button>\n                <Button type=\"submit\" disabled={isPending}>\n                  {isPending ? \"Creating...\" : \"Create Equity Plan\"}\n                </Button>\n              </div>\n            </form>\n          </DialogContent>\n        </Dialog>\n      </CardContent>\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}