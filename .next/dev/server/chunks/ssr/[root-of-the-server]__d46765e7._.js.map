{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":["file:///Users/jarvis/Desktop/BoardFinance/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"../../prisma/generated/prisma/client.js\";\nimport { PrismaPg } from \"@prisma/adapter-pg\";\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined;\n};\n\nconst adapter = new PrismaPg({\n  connectionString: process.env.DATABASE_URL,\n});\n\nexport const prisma =\n  globalForPrisma.prisma ??\n  new PrismaClient({\n    adapter,\n    log: process.env.NODE_ENV === \"development\" ? [\"query\", \"error\", \"warn\"] : [\"error\"],\n  });\n\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = prisma;\n"],"names":[],"mappings":";;;;;;;;;AACA;;;;;;;AAEA,MAAM,kBAAkB;AAIxB,MAAM,UAAU,IAAI,uKAAQ,CAAC;IAC3B,kBAAkB,QAAQ,GAAG,CAAC,YAAY;AAC5C;AAEO,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,aAAa;IACf;IACA,KAAK,uCAAyC;QAAC;QAAS;QAAS;KAAO,GAAG;AAC7E;AAEF,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///Users/jarvis/Desktop/BoardFinance/src/lib/calculations.ts"],"sourcesContent":["import { prisma } from \"./prisma\";\nimport {\n  addMonths,\n  differenceInDays,\n  isBefore,\n  isAfter,\n  isSameDay,\n  startOfDay,\n} from \"date-fns\";\nimport type {\n  ShareCertificate,\n  ShareClass,\n  OptionGrant,\n  VestingSchedule,\n  Convertible,\n  EquityPlan,\n  Stakeholder,\n} from \"../../prisma/generated/prisma\";\n\n// ============================================\n// TYPES\n// ============================================\n\nexport interface FullyDilutedBreakdown {\n  outstandingCommon: number;\n  outstandingPreferredAsConverted: number;\n  allOutstandingOptions: number;\n  availableOptionPool: number;\n  convertibleShares: number;\n  total: number;\n}\n\nexport interface StakeholderOwnership {\n  stakeholderId: string;\n  stakeholderName: string;\n  stakeholderType: string;\n  outstandingShares: number;\n  fullyDilutedShares: number;\n  outstandingPercent: number;\n  fullyDilutedPercent: number;\n  totalInvested: number;\n}\n\nexport interface ShareClassOwnership {\n  shareClassId: string;\n  shareClassName: string;\n  shareClassType: string;\n  outstandingShares: number;\n  fullyDilutedShares: number;\n  outstandingPercent: number;\n  fullyDilutedPercent: number;\n}\n\nexport interface VestingPeriodData {\n  periodNumber: number;\n  vestingDate: Date;\n  sharesVested: number;\n  cumulativeVested: number;\n}\n\n// ============================================\n// FULLY DILUTED CALCULATIONS\n// ============================================\n\nexport async function getFullyDilutedBreakdown(\n  companyId: string\n): Promise<FullyDilutedBreakdown> {\n  // 1. Outstanding common shares\n  const commonCerts = await prisma.shareCertificate.findMany({\n    where: {\n      companyId,\n      status: \"OUTSTANDING\",\n      shareClass: { type: \"COMMON\" },\n    },\n    include: { shareClass: true },\n  });\n  const outstandingCommon = commonCerts.reduce((sum, c) => sum + c.quantity, 0);\n\n  // 2. Outstanding preferred shares as-converted\n  const preferredCerts = await prisma.shareCertificate.findMany({\n    where: {\n      companyId,\n      status: \"OUTSTANDING\",\n      shareClass: { type: \"PREFERRED\" },\n    },\n    include: { shareClass: true },\n  });\n  const outstandingPreferredAsConverted = preferredCerts.reduce((sum, c) => {\n    const conversionRatio = Number(c.shareClass.conversionRatio);\n    return sum + Math.floor(c.quantity * conversionRatio);\n  }, 0);\n\n  // 3. All outstanding options (vested + unvested from active grants)\n  const activeGrants = await prisma.optionGrant.findMany({\n    where: {\n      companyId,\n      status: { in: [\"ACTIVE\", \"PARTIALLY_EXERCISED\"] },\n    },\n    include: { exercises: true },\n  });\n  const allOutstandingOptions = activeGrants.reduce((sum, g) => {\n    const exercised = g.exercises.reduce((e, ex) => e + ex.sharesExercised, 0);\n    return sum + (g.originalQuantity - exercised - g.expiredQuantity);\n  }, 0);\n\n  // 4. Available option pool\n  const equityPlans = await prisma.equityPlan.findMany({\n    where: { companyId },\n  });\n  const availableOptionPool = equityPlans.reduce(\n    (sum, p) => sum + p.availableShares,\n    0\n  );\n\n  // 5. Shares issuable on SAFE/CN conversion\n  const convertibles = await prisma.convertible.findMany({\n    where: { companyId, status: \"OUTSTANDING\" },\n  });\n  \n  // For conversion shares, we need company's last priced round or cap\n  const latestPreferredClass = await prisma.shareClass.findFirst({\n    where: { companyId, type: \"PREFERRED\" },\n    orderBy: { createdAt: \"desc\" },\n  });\n  \n  let convertibleShares = 0;\n  for (const conv of convertibles) {\n    const principal = Number(conv.principal);\n    const accrued = conv.type === \"CONVERTIBLE_NOTE\" \n      ? calculateAccruedInterest(conv)\n      : 0;\n    const totalAmount = principal + accrued;\n    \n    // Use valuation cap to determine shares, or latest preferred price\n    if (conv.valuationCap) {\n      const cap = Number(conv.valuationCap);\n      // Estimate shares based on cap and a standard fully diluted assumption\n      // This is a simplified calculation - real conversion happens at a priced round\n      const impliedPrice = cap / 10000000; // Simplified: assume 10M fully diluted\n      convertibleShares += Math.floor(totalAmount / impliedPrice);\n    } else if (latestPreferredClass) {\n      // Use latest preferred price with discount\n      const discount = conv.discount ? Number(conv.discount) : 0;\n      const price = Number(latestPreferredClass.pricePerShare) * (1 - discount);\n      if (price > 0) {\n        convertibleShares += Math.floor(totalAmount / price);\n      }\n    }\n  }\n\n  const total =\n    outstandingCommon +\n    outstandingPreferredAsConverted +\n    allOutstandingOptions +\n    availableOptionPool +\n    convertibleShares;\n\n  return {\n    outstandingCommon,\n    outstandingPreferredAsConverted,\n    allOutstandingOptions,\n    availableOptionPool,\n    convertibleShares,\n    total,\n  };\n}\n\nexport async function getFullyDilutedShares(companyId: string): Promise<number> {\n  const breakdown = await getFullyDilutedBreakdown(companyId);\n  return breakdown.total;\n}\n\nexport async function getTotalOutstandingShares(companyId: string): Promise<number> {\n  const certs = await prisma.shareCertificate.findMany({\n    where: { companyId, status: \"OUTSTANDING\" },\n  });\n  return certs.reduce((sum, c) => sum + c.quantity, 0);\n}\n\n// ============================================\n// OWNERSHIP CALCULATIONS\n// ============================================\n\nexport async function getOwnershipByStakeholder(\n  companyId: string\n): Promise<StakeholderOwnership[]> {\n  const stakeholders = await prisma.stakeholder.findMany({\n    where: { companyId },\n    include: {\n      shareCertificates: {\n        where: { status: \"OUTSTANDING\" },\n        include: { shareClass: true },\n      },\n      optionGrants: {\n        where: { status: { in: [\"ACTIVE\", \"PARTIALLY_EXERCISED\"] } },\n        include: { exercises: true, vestingSchedule: true },\n      },\n      convertibles: {\n        where: { status: \"OUTSTANDING\" },\n      },\n    },\n  });\n\n  const fullyDiluted = await getFullyDilutedBreakdown(companyId);\n  const totalOutstanding = await getTotalOutstandingShares(companyId);\n\n  return stakeholders.map((s) => {\n    // Outstanding shares from certificates\n    const outstandingShares = s.shareCertificates.reduce((sum, c) => {\n      const conversionRatio =\n        c.shareClass.type === \"PREFERRED\"\n          ? Number(c.shareClass.conversionRatio)\n          : 1;\n      return sum + Math.floor(c.quantity * conversionRatio);\n    }, 0);\n\n    // Options (remaining unexercised)\n    const optionShares = s.optionGrants.reduce((sum, g) => {\n      const exercised = g.exercises.reduce((e, ex) => e + ex.sharesExercised, 0);\n      return sum + (g.originalQuantity - exercised - g.expiredQuantity);\n    }, 0);\n\n    // Convertible shares estimate\n    let convertibleShares = 0;\n    for (const conv of s.convertibles) {\n      const principal = Number(conv.principal);\n      const accrued =\n        conv.type === \"CONVERTIBLE_NOTE\" ? calculateAccruedInterest(conv) : 0;\n      const totalAmount = principal + accrued;\n      if (conv.valuationCap) {\n        const cap = Number(conv.valuationCap);\n        const impliedPrice = cap / fullyDiluted.total || 1;\n        convertibleShares += Math.floor(totalAmount / impliedPrice);\n      }\n    }\n\n    const fullyDilutedShares = outstandingShares + optionShares + convertibleShares;\n\n    // Total invested\n    const totalInvested =\n      s.shareCertificates.reduce((sum, c) => sum + Number(c.cashPaid), 0) +\n      s.convertibles.reduce((sum, c) => sum + Number(c.principal), 0);\n\n    return {\n      stakeholderId: s.id,\n      stakeholderName: s.name,\n      stakeholderType: s.type,\n      outstandingShares,\n      fullyDilutedShares,\n      outstandingPercent:\n        totalOutstanding > 0 ? outstandingShares / totalOutstanding : 0,\n      fullyDilutedPercent:\n        fullyDiluted.total > 0 ? fullyDilutedShares / fullyDiluted.total : 0,\n      totalInvested,\n    };\n  });\n}\n\nexport async function getOwnershipByShareClass(\n  companyId: string\n): Promise<ShareClassOwnership[]> {\n  const shareClasses = await prisma.shareClass.findMany({\n    where: { companyId },\n    include: {\n      shareCertificates: {\n        where: { status: \"OUTSTANDING\" },\n      },\n    },\n  });\n\n  const fullyDiluted = await getFullyDilutedBreakdown(companyId);\n  const totalOutstanding = await getTotalOutstandingShares(companyId);\n\n  return shareClasses.map((sc) => {\n    const outstandingShares = sc.shareCertificates.reduce(\n      (sum, c) => sum + c.quantity,\n      0\n    );\n\n    // For fully diluted, convert preferred to common equivalent\n    const conversionRatio =\n      sc.type === \"PREFERRED\" ? Number(sc.conversionRatio) : 1;\n    const fullyDilutedShares = Math.floor(outstandingShares * conversionRatio);\n\n    return {\n      shareClassId: sc.id,\n      shareClassName: sc.name,\n      shareClassType: sc.type,\n      outstandingShares,\n      fullyDilutedShares,\n      outstandingPercent:\n        totalOutstanding > 0 ? outstandingShares / totalOutstanding : 0,\n      fullyDilutedPercent:\n        fullyDiluted.total > 0 ? fullyDilutedShares / fullyDiluted.total : 0,\n    };\n  });\n}\n\n// ============================================\n// VESTING CALCULATIONS\n// ============================================\n\nexport function generateVestingPeriods(\n  originalQuantity: number,\n  schedule: {\n    vestingStartDate: Date;\n    cliffMonths: number;\n    cliffPercentage: number | { toNumber(): number };\n    totalPeriods: number;\n    periodUnit: \"MONTHLY\" | \"QUARTERLY\" | \"ANNUALLY\";\n  },\n  terminationDate?: Date | null\n): VestingPeriodData[] {\n  const periods: VestingPeriodData[] = [];\n  const vestingStart = startOfDay(new Date(schedule.vestingStartDate));\n  const cliffPercent = Number(schedule.cliffPercentage);\n\n  // Calculate cliff date and shares\n  const cliffDate = addMonths(vestingStart, schedule.cliffMonths);\n  const cliffShares = Math.floor(originalQuantity * cliffPercent);\n  const remainingShares = originalQuantity - cliffShares;\n  const remainingPeriods = schedule.totalPeriods - schedule.cliffMonths;\n  const sharesPerPeriod =\n    remainingPeriods > 0 ? Math.floor(remainingShares / remainingPeriods) : 0;\n\n  // Handle termination before cliff\n  if (terminationDate && isBefore(startOfDay(terminationDate), cliffDate)) {\n    // If terminated on cliff date, cliff still vests\n    if (!isSameDay(startOfDay(terminationDate), cliffDate)) {\n      return []; // Terminated before cliff - no vesting\n    }\n  }\n\n  // Cliff period (period 0)\n  periods.push({\n    periodNumber: 0,\n    vestingDate: cliffDate,\n    sharesVested: cliffShares,\n    cumulativeVested: cliffShares,\n  });\n\n  // Monthly/quarterly/annual periods after cliff\n  let cumulative = cliffShares;\n  const periodMonths =\n    schedule.periodUnit === \"MONTHLY\"\n      ? 1\n      : schedule.periodUnit === \"QUARTERLY\"\n      ? 3\n      : 12;\n\n  for (let i = 1; i <= remainingPeriods; i++) {\n    const periodDate = addMonths(cliffDate, i * periodMonths);\n\n    // Check if terminated before this period\n    if (terminationDate && isAfter(periodDate, startOfDay(terminationDate))) {\n      break;\n    }\n\n    // Last period gets remainder to handle fractional rounding\n    const isLastPeriod = i === remainingPeriods;\n    const vested = isLastPeriod\n      ? remainingShares - sharesPerPeriod * (remainingPeriods - 1)\n      : sharesPerPeriod;\n\n    cumulative += vested;\n\n    periods.push({\n      periodNumber: i,\n      vestingDate: periodDate,\n      sharesVested: vested,\n      cumulativeVested: cumulative,\n    });\n  }\n\n  return periods;\n}\n\nexport async function getVestedQuantity(\n  grantId: string,\n  asOfDate: Date = new Date()\n): Promise<number> {\n  const grant = await prisma.optionGrant.findUnique({\n    where: { id: grantId },\n    include: { vestingSchedule: true },\n  });\n\n  if (!grant || !grant.vestingSchedule) return 0;\n\n  const periods = generateVestingPeriods(\n    grant.originalQuantity,\n    {\n      vestingStartDate: grant.vestingSchedule.vestingStartDate,\n      cliffMonths: grant.vestingSchedule.cliffMonths,\n      cliffPercentage: grant.vestingSchedule.cliffPercentage,\n      totalPeriods: grant.vestingSchedule.totalPeriods,\n      periodUnit: grant.vestingSchedule.periodUnit,\n    },\n    grant.terminationDate\n  );\n\n  // Find the last period that has vested as of the given date\n  const asOf = startOfDay(asOfDate);\n  let vested = 0;\n  for (const period of periods) {\n    if (!isAfter(startOfDay(period.vestingDate), asOf)) {\n      vested = period.cumulativeVested;\n    }\n  }\n\n  return vested;\n}\n\nexport async function getExercisedQuantity(grantId: string): Promise<number> {\n  const exercises = await prisma.optionExercise.findMany({\n    where: { optionGrantId: grantId, status: { in: [\"APPROVED\", \"COMPLETED\"] } },\n  });\n  return exercises.reduce((sum, ex) => sum + ex.sharesExercised, 0);\n}\n\nexport async function getExercisableQuantity(\n  grantId: string,\n  asOfDate: Date = new Date()\n): Promise<number> {\n  const vested = await getVestedQuantity(grantId, asOfDate);\n  const exercised = await getExercisedQuantity(grantId);\n  return Math.max(0, vested - exercised);\n}\n\nexport function getVestingDescription(schedule: {\n  cliffMonths: number;\n  cliffPercentage: number | { toNumber(): number };\n  totalPeriods: number;\n  periodUnit: \"MONTHLY\" | \"QUARTERLY\" | \"ANNUALLY\";\n}): string {\n  const cliffPercent = Math.round(Number(schedule.cliffPercentage) * 100);\n  const cliffYears = schedule.cliffMonths / 12;\n  const totalYears = schedule.totalPeriods / 12;\n  const periodName = schedule.periodUnit.toLowerCase();\n\n  if (schedule.periodUnit === \"MONTHLY\") {\n    return `1/${schedule.totalPeriods} ${periodName} vesting with a ${cliffYears} year cliff (${cliffPercent}%)`;\n  }\n  return `${totalYears}-year ${periodName} vesting with a ${cliffYears}-year cliff`;\n}\n\n// ============================================\n// INTEREST CALCULATIONS (Convertible Notes)\n// ============================================\n\nexport function calculateAccruedInterest(\n  convertible: Pick<\n    Convertible,\n    \"type\" | \"principal\" | \"interestRate\" | \"interestStartDate\"\n  >,\n  asOfDate: Date = new Date()\n): number {\n  if (convertible.type !== \"CONVERTIBLE_NOTE\") return 0;\n  if (!convertible.interestRate || !convertible.interestStartDate) return 0;\n\n  const principal = Number(convertible.principal);\n  const rate = Number(convertible.interestRate);\n  const startDate = new Date(convertible.interestStartDate);\n  const daysElapsed = differenceInDays(asOfDate, startDate);\n\n  if (daysElapsed <= 0) return 0;\n\n  // Simple interest: principal * rate * (days / 365)\n  return principal * rate * (daysElapsed / 365);\n}\n\nexport function getTotalConvertibleAmount(\n  convertible: Pick<\n    Convertible,\n    \"type\" | \"principal\" | \"interestRate\" | \"interestStartDate\"\n  >,\n  asOfDate: Date = new Date()\n): number {\n  const principal = Number(convertible.principal);\n  const accrued = calculateAccruedInterest(convertible, asOfDate);\n  return principal + accrued;\n}\n\n// ============================================\n// AGGREGATE METRICS\n// ============================================\n\nexport async function getCapTableMetrics(companyId: string) {\n  const [fullyDiluted, equityPlans, certificates, convertibles] =\n    await Promise.all([\n      getFullyDilutedBreakdown(companyId),\n      prisma.equityPlan.findMany({ where: { companyId } }),\n      prisma.shareCertificate.findMany({\n        where: { companyId, status: \"OUTSTANDING\" },\n      }),\n      prisma.convertible.findMany({\n        where: { companyId, status: \"OUTSTANDING\" },\n      }),\n    ]);\n\n  const availableShares = equityPlans.reduce(\n    (sum, p) => sum + p.availableShares,\n    0\n  );\n\n  const amountRaised =\n    certificates.reduce((sum, c) => sum + Number(c.cashPaid), 0) +\n    convertibles.reduce((sum, c) => sum + Number(c.principal), 0);\n\n  return {\n    fullyDilutedShares: fullyDiluted.total,\n    fullyDilutedBreakdown: fullyDiluted,\n    availableShares,\n    amountRaised,\n  };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 489, "column": 0}, "map": {"version":3,"sources":["file:///Users/jarvis/Desktop/BoardFinance/src/app/%28admin%29/page.tsx"],"sourcesContent":["import { prisma } from \"@/lib/prisma\";\nimport { getCapTableMetrics } from \"@/lib/calculations\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { formatCurrency, formatNumber, formatPercent } from \"@/lib/utils\";\nimport Link from \"next/link\";\nimport {\n  FileText,\n  Award,\n  Landmark,\n  Users,\n  TrendingUp,\n  ArrowRight,\n} from \"lucide-react\";\n\nasync function getDashboardData() {\n  const company = await prisma.company.findFirst();\n  if (!company) {\n    return null;\n  }\n\n  const [metrics, certificateCount, optionCount, convertibleCount, stakeholderCount] =\n    await Promise.all([\n      getCapTableMetrics(company.id),\n      prisma.shareCertificate.count({ where: { companyId: company.id, status: \"OUTSTANDING\" } }),\n      prisma.optionGrant.count({ where: { companyId: company.id, status: { in: [\"ACTIVE\", \"PARTIALLY_EXERCISED\"] } } }),\n      prisma.convertible.count({ where: { companyId: company.id, status: \"OUTSTANDING\" } }),\n      prisma.stakeholder.count({ where: { companyId: company.id } }),\n    ]);\n\n  return {\n    company,\n    metrics,\n    certificateCount,\n    optionCount,\n    convertibleCount,\n    stakeholderCount,\n  };\n}\n\nexport default async function DashboardPage() {\n  const data = await getDashboardData();\n\n  if (!data) {\n    return (\n      <div className=\"flex flex-col items-center justify-center min-h-[400px]\">\n        <h2 className=\"text-2xl font-bold mb-4\">Welcome to BoardFinance</h2>\n        <p className=\"text-muted-foreground mb-4\">\n          No company found. Please run the database seed to get started.\n        </p>\n        <code className=\"bg-muted px-4 py-2 rounded\">npm run db:seed</code>\n      </div>\n    );\n  }\n\n  const { company, metrics, certificateCount, optionCount, convertibleCount, stakeholderCount } = data;\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Header */}\n      <div>\n        <h1 className=\"text-3xl font-bold tracking-tight\">{company.name}</h1>\n        <p className=\"text-muted-foreground\">\n          Incorporated in {company.incorporationState} on{\" \"}\n          {new Date(company.incorporationDate).toLocaleDateString()}\n        </p>\n      </div>\n\n      {/* Key Metrics */}\n      <div className=\"grid gap-4 md:grid-cols-3\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Fully Diluted Shares</CardTitle>\n            <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">\n              {formatNumber(metrics.fullyDilutedShares)}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              Authorized: {formatNumber(company.authorizedShares)}\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Amount Raised</CardTitle>\n            <Landmark className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">\n              {formatCurrency(metrics.amountRaised)}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              From equity and convertibles\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Option Pool Available</CardTitle>\n            <Award className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">\n              {formatNumber(metrics.availableShares)}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              {formatPercent(metrics.availableShares / metrics.fullyDilutedShares)} of fully diluted\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Ownership Breakdown */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Fully Diluted Breakdown</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-2\">\n                <div className=\"w-3 h-3 rounded-full bg-blue-500\" />\n                <span>Common Stock</span>\n              </div>\n              <div className=\"text-right\">\n                <div className=\"font-medium\">\n                  {formatNumber(metrics.fullyDilutedBreakdown.outstandingCommon)}\n                </div>\n                <div className=\"text-sm text-muted-foreground\">\n                  {formatPercent(\n                    metrics.fullyDilutedBreakdown.outstandingCommon /\n                      metrics.fullyDilutedShares\n                  )}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-2\">\n                <div className=\"w-3 h-3 rounded-full bg-green-500\" />\n                <span>Preferred (as-converted)</span>\n              </div>\n              <div className=\"text-right\">\n                <div className=\"font-medium\">\n                  {formatNumber(\n                    metrics.fullyDilutedBreakdown.outstandingPreferredAsConverted\n                  )}\n                </div>\n                <div className=\"text-sm text-muted-foreground\">\n                  {formatPercent(\n                    metrics.fullyDilutedBreakdown.outstandingPreferredAsConverted /\n                      metrics.fullyDilutedShares\n                  )}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-2\">\n                <div className=\"w-3 h-3 rounded-full bg-orange-500\" />\n                <span>Outstanding Options</span>\n              </div>\n              <div className=\"text-right\">\n                <div className=\"font-medium\">\n                  {formatNumber(metrics.fullyDilutedBreakdown.allOutstandingOptions)}\n                </div>\n                <div className=\"text-sm text-muted-foreground\">\n                  {formatPercent(\n                    metrics.fullyDilutedBreakdown.allOutstandingOptions /\n                      metrics.fullyDilutedShares\n                  )}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-2\">\n                <div className=\"w-3 h-3 rounded-full bg-gray-400\" />\n                <span>Available Option Pool</span>\n              </div>\n              <div className=\"text-right\">\n                <div className=\"font-medium\">\n                  {formatNumber(metrics.fullyDilutedBreakdown.availableOptionPool)}\n                </div>\n                <div className=\"text-sm text-muted-foreground\">\n                  {formatPercent(\n                    metrics.fullyDilutedBreakdown.availableOptionPool /\n                      metrics.fullyDilutedShares\n                  )}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-2\">\n                <div className=\"w-3 h-3 rounded-full bg-purple-500\" />\n                <span>Convertibles (estimated)</span>\n              </div>\n              <div className=\"text-right\">\n                <div className=\"font-medium\">\n                  {formatNumber(metrics.fullyDilutedBreakdown.convertibleShares)}\n                </div>\n                <div className=\"text-sm text-muted-foreground\">\n                  {formatPercent(\n                    metrics.fullyDilutedBreakdown.convertibleShares /\n                      metrics.fullyDilutedShares\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Quick Links */}\n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n        <Link href=\"/certificates\">\n          <Card className=\"hover:bg-muted/50 transition-colors cursor-pointer\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Share Certificates</CardTitle>\n              <FileText className=\"h-4 w-4 text-blue-500\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\">{certificateCount}</div>\n              <div className=\"flex items-center text-xs text-muted-foreground\">\n                View all <ArrowRight className=\"ml-1 h-3 w-3\" />\n              </div>\n            </CardContent>\n          </Card>\n        </Link>\n\n        <Link href=\"/options\">\n          <Card className=\"hover:bg-muted/50 transition-colors cursor-pointer\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Option Grants</CardTitle>\n              <Award className=\"h-4 w-4 text-orange-500\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\">{optionCount}</div>\n              <div className=\"flex items-center text-xs text-muted-foreground\">\n                View all <ArrowRight className=\"ml-1 h-3 w-3\" />\n              </div>\n            </CardContent>\n          </Card>\n        </Link>\n\n        <Link href=\"/convertibles\">\n          <Card className=\"hover:bg-muted/50 transition-colors cursor-pointer\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Convertibles</CardTitle>\n              <Landmark className=\"h-4 w-4 text-purple-500\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\">{convertibleCount}</div>\n              <div className=\"flex items-center text-xs text-muted-foreground\">\n                View all <ArrowRight className=\"ml-1 h-3 w-3\" />\n              </div>\n            </CardContent>\n          </Card>\n        </Link>\n\n        <Link href=\"/stakeholders\">\n          <Card className=\"hover:bg-muted/50 transition-colors cursor-pointer\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Stakeholders</CardTitle>\n              <Users className=\"h-4 w-4 text-green-500\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\">{stakeholderCount}</div>\n              <div className=\"flex items-center text-xs text-muted-foreground\">\n                View all <ArrowRight className=\"ml-1 h-3 w-3\" />\n              </div>\n            </CardContent>\n          </Card>\n        </Link>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}